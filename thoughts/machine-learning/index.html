<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Basic SEO / Title -->
    <title>Machine Learning ‚Äì Thoughts</title> 
    <link rel="canonical" href="https://illya.sh/thoughts/machine-learning">
    <meta name="description" content="Ongoing notes on machine learning and AI systems, including forecasting models, evaluation techniques, and practical workflows for financial and technical an...">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media Tags -->
    <meta property="og:title" content='Machine Learning ‚Äì Thoughts' />
    <meta property="og:type" content='website' />
    <meta property="og:url" content='https://illya.sh/thoughts/machine-learning' />
    <meta property="og:image" content='https://illya.sh/staticthoughts/data/illya_gerasymchuk_thoughts.webp' />
    <meta property="og:description" content='Ongoing notes on machine learning and AI systems, including forecasting models, evaluation techniques, and practical workflows for financial and technical analysis.' />
    <meta property="og:site_name" content='Illya Gerasymchuk | Financial Markets, Macro, Bitcoin & Commodities' />
    <meta name="twitter:card" content='summary_large_image' />
    <meta name="twitter:title" content='Machine Learning ‚Äì Thoughts' />
    <meta name="twitter:description" content='Ongoing notes on machine learning and AI systems, including forecasting models, evaluation techniques, and practical workflows for financial and technical analysis.' />
    <meta name="twitter:image" content='https://illya.sh/staticthoughts/data/illya_gerasymchuk_thoughts.webp' />
    <meta property="og:image:alt" content='Machine Learning ‚Äì Thoughts' />
    <meta name="twitter:image:alt" content='Machine Learning ‚Äì Thoughts' />
    <!-- RSS Feed Discovery -->
    <link rel="alternate" type="application/rss+xml" title="Illya Gerasymchuk Thoughts RSS" href="https://illya.sh/thoughts/feed.xml"/>
    <link rel="alternate" type="application/rss+xml" title="Illya Gerasymchuk Threads RSS" href="https://illya.sh/threads/feed.xml"/>

    <!-- Font Preload (CORS/crossorigin required for woff2) -->
    <link rel="preload" href="/staticthoughts/data/fonts/literata/Literata-VF-latin.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/staticthoughts/data/fonts/literata/Literata-Italic-VF-latin.woff2" as="font" type="font/woff2" crossorigin="anonymous">

    <script type="application/ld+json">
{"@context": "https://schema.org", "@graph": [{"@type": "Person", "@id": "https://illya.sh/#person", "name": "Illya Gerasymchuk", "url": "https://illya.sh/thoughts", "image": "https://illya.sh/staticthoughts/data/profile.png", "sameAs": ["https://illya.sh", "https://github.com/iluxonchik", "https://twitter.com/illyaGera", "https://x.com/illyaGera"], "alternateName": "Illya", "jobTitle": "Financial & Software Engineer", "description": "I build software and write about how money moves: central banks, liquidity, financial market structure, commodities, Bitcoin, crypto markets, and AI systems.", "knowsAbout": ["Monetary policy", "Central banks", "Global liquidity", "Financial market structure", "Market microstructure", "Financial system infrastructure", "Commodities", "Gold", "Silver", "Bitcoin", "Crypto markets", "DeFi", "Stablecoins", "Foreign exchange", "AI systems", "Agentic AI systems", "Software engineering", "Financial law"]}, {"@type": "CollectionPage", "name": "Machine Learning", "url": "https://illya.sh/thoughts/machine-learning", "description": "Ongoing notes on machine learning and AI systems, including forecasting models, evaluation techniques, and practical workflows for financial and technical analysis.", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}}, {"@type": "BlogPosting", "headline": "Using Neural Networks To Find Imbalances In Limit Order Books", "articleBody": "Using Neural Networks To Find Imbalances In Limit Order Books\n\nI've been working on model factory that predicts short-term asset movements. The model focuses on predicting whether the price of an asset at a future time T+c will be below or above the current asset's price at time T. c is an arbitrary constant which in my model represents the number of minutes.\n\nCurrently, it's structured to match Polymarket's 5 minute BTC up or down markets, so this model can be used for trading on those markets. In this setup, the return is binary -- you either almost double or lose the whole position (assuming an entry as within a small delta of the market open). But this model can also be easily adapted to long/short futures positions with more flexibility on entry or exit times ‚Äî it would require adapting the labeler and the backtest configuration (namely the cost model and position sizing).\n\nThe first version of the model factory relied on features derived from 1 minute OCHLV data for Bitcoin. I focused on setting up a multi-model pipeline, and generalize it into a configurable DSL-like experience. I also focused on avoiding a big part of overfitting/looking forward and doing the first level of parameter optimization. I was able to obtain a small edge (‚âà0.54 win rate), and short-run live tests showed the model to be profitable, however I‚Äôm not very sure how resilient it is to regime changes, nor I find the computed edge sufficient (the win rate is subject to the error from the models). I also wasn‚Äôt expecting to achieve a meaningful edge with just OCHLV data, so I‚Äôm integrating limit order book (LOB) data in order to extract price movement predictive patterns from the lower level dynamics that end up determining the price.\n\nGiven that the order book drives the market price, its reasonable to assume that there is a function that expresses the relationship between the current order book state, and in which direction that state is more likely to move the price in the short-term. It‚Äôs my first time working with LOB data, so I looked for papers which explore a framework for modeling price predictions based on a multi-level LOB with price and volume data for bid and ask at each level. After filtering through several options, I settled on one titled ‚ÄúDeepLOB: Deep Convolutional Neural Networks for Limit Order Books‚Äù by Zihao Zhang, Stefan Zohren, and Stephen Roberts. I liked it because the authors taking care in avoiding overfitting and leaking forwarding the data, by splitting the data set into one for training, one for validation and one for testing. The model is trained on the training set, the hyperparameters are optimized on the validation set, and the verification/backtesting is done on the test set. I also wanted to integrate neural networks into the pipeline, and DeepLOB model uses a Convolutional Neural Network (CNN) and a Long Short-Term Memory (LSTM) network in its construction.\n\nThe neural networks in DeepLOB works as follows. First, the raw LOB data passes through a CNN to summarize/extract patterns from the data via filters whose weights are learned by the network. The output then goes through the inception module, which is another CNN which operates with multiple convolutional filters if different sizes to capture multiple time window patterns. Then, the resulting matrix is passed to LSTM, which is a recurrent neural network, meaning it‚Äôs able to maintain ‚Äúmemory‚Äù of the past state when evaluating the new state. LSTM outputs a vector, which is then multiplied by a weight matrix to produce 3 raw scores (logits), which then get mapped to probability for each one of the 3 classes via Softmax: (Up, No Change, Down), which serve as a trading signal.\n\nI‚Äôll be incorporating something similar as signals/experts and/or features in the existing pipeline of my model factory. I‚Äôll also extend the pipeline to add an additional split for the validation set to optimize the hyper parameters of the random forest. I‚Äôll upload the code to GitHub soon, but note that it‚Äôs a work in progress.", "url": "https://illya.sh/thoughts/using-neural-networks-to-find-imbalances-in-limit-order", "mainEntityOfPage": "https://illya.sh/thoughts/using-neural-networks-to-find-imbalances-in-limit-order", "datePublished": "2026-02-27T12:29:38+00:00", "dateModified": "2026-02-27T12:29:38+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/using-neural-networks-to-find-imbalances-in-limit-order.jpg"}, {"@type": "BlogPosting", "headline": "The random forest's features have been heavily refactored. I also replaced the polymarket feature with lookah...", "articleBody": "The random forest's features have been heavily refactored. I also replaced the polymarket feature with lookahead bias (the proxy model) with a combination of other indicators.", "url": "https://illya.sh/thoughts/the-random-forests-features-have-been-heavily-refactored-i", "mainEntityOfPage": "https://illya.sh/thoughts/the-random-forests-features-have-been-heavily-refactored-i", "datePublished": "2026-02-20T16:51:38+00:00", "dateModified": "2026-02-20T16:51:38+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/the-random-forests-features-have-been-heavily-refactored-i.jpg"}, {"@type": "BlogPosting", "headline": "As a result of the first step in optimizing/prioritizing the random forest‚Äôs features -- I've dropped about h...", "articleBody": "As a result of the first step in optimizing/prioritizing the random forest‚Äôs features -- I've dropped about half of them üòÅ", "url": "https://illya.sh/thoughts/as-a-result-of-the-first-step-in-optimizing-prioritizing-the", "mainEntityOfPage": "https://illya.sh/thoughts/as-a-result-of-the-first-step-in-optimizing-prioritizing-the", "datePublished": "2026-02-20T15:26:09+00:00", "dateModified": "2026-02-20T15:26:09+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/as-a-result-of-the-first-step-in-optimizing-prioritizing-the.jpg"}, {"@type": "BlogPosting", "headline": "Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization", "articleBody": "Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization\n\nAfter the first level of tuning of the random forest‚Äôs parameters, it came time to optimize the features on which the random forest gets trained on. I‚Äôve already did a minor cleanup, but I didn‚Äôt yet test for the predictive importance of each feature in the random forest.\n\nTo optimize the random forest‚Äôs features, I‚Äôm using Out of Sample Permutation Feature Importance (OOS). The OOS approach consists in three core steps:\n\n1Ô∏è‚É£ Train the random forest once on the training data\n2Ô∏è‚É£ Take out-of-sample validation data (testing data), permute the values of a single feature/values within the same column and pass them to the model trained in step 1.\n3Ô∏è‚É£ A feature is important for the model if the model‚Äôs predictive power reduces significantly when that feature‚Äôs values are randomly shuffled.\n\nThe ‚Äúout of sample‚Äù part refers to the fact that the set of data used to train the model and evaluate it after permutations is distinct, thus reducing the contribution of noise to the evaluation metrics. By default, scikit-learn uses Gini Importance to rank features by their utility to the model. Gini is a bad metric for my data because of:\n\n‚ûñ High cardinality bias (it has an inherent bias towards continuous variables, and some of my features are discrete)\n‚ûñ Gini importance is computed on the training data\n‚ûñ In case of two correlated features, the random forest will randomly pick one at each split, but Gini will actually divide the importance between the two\n\nAdditionally, the out-of-sample Area Under the ROC Curve (AUC) of 0.7566 is unrealistically good for predicting 5-minute Bitcoin price moves. This value implies that if you pick a random 5-minute winning window and a 5-minute losing one, my model ranks the winner window ‚âà76% of the time. Either I found a model that beats virtually every financial institution in existence, or there is a lookahead bias and overfitting happening in the model. \n\nConclusion: my meta forest ‚Äî the ‚Äúseconds_to_settle‚Äù feature is basically carrying the entire model üòÇ So in its current state, the random forest is training almost entirely on the time of day/time to expiration. The cleanup has started.", "url": "https://illya.sh/thoughts/out-of-sample-permutation-feature-importance-for-random", "mainEntityOfPage": "https://illya.sh/thoughts/out-of-sample-permutation-feature-importance-for-random", "datePublished": "2026-02-20T15:08:42+00:00", "dateModified": "2026-02-20T15:08:42+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/out-of-sample-permutation-feature-importance-for-random.jpg"}, {"@type": "BlogPosting", "headline": "The time to optimize hyperparameters of the random forest has come", "articleBody": "The time to optimize hyperparameters of the random forest has come\n\nStarting with a grid search approach", "url": "https://illya.sh/thoughts/the-time-to-optimize-hyperparameters-of-the-random-forest", "mainEntityOfPage": "https://illya.sh/thoughts/the-time-to-optimize-hyperparameters-of-the-random-forest", "datePublished": "2026-02-19T16:04:34+00:00", "dateModified": "2026-02-19T16:04:34+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/the-time-to-optimize-hyperparameters-of-the-random-forest.jpg"}, {"@type": "BlogPosting", "headline": "Added a connection to Binance's futures API and now I have the base learners and the random forest looking fo...", "articleBody": "Added a connection to Binance's futures API and now I have the base learners and the random forest looking for profitable 5-minute Bitcoin trades in real time\n\nLet's see how it goes, the model already entered its first trade. Let's see how it goes üòÑ", "url": "https://illya.sh/thoughts/added-a-connection-to-binances-futures-api-and-now-i-have", "mainEntityOfPage": "https://illya.sh/thoughts/added-a-connection-to-binances-futures-api-and-now-i-have", "datePublished": "2026-02-19T13:52:59+00:00", "dateModified": "2026-02-19T13:52:59+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/added-a-connection-to-binances-futures-api-and-now-i-have.png"}, {"@type": "BlogPosting", "headline": "This a gross oversimplification of what it takes to replicate the human brain with AI", "articleBody": "This a gross oversimplification of what it takes to replicate the human brain with AI\n\nThe post is assuming we have a model that can accurately replicate the human brain, which we don't.\n\n200T parameter models won't solve that -- you'll still have a high model bias.", "url": "https://illya.sh/thoughts/this-a-gross-oversimplification-of-what-it-takes-to", "mainEntityOfPage": "https://illya.sh/thoughts/this-a-gross-oversimplification-of-what-it-takes-to", "datePublished": "2026-02-19T12:31:36+00:00", "dateModified": "2026-02-19T12:31:36+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/this-a-gross-oversimplification-of-what-it-takes-to.jpg"}, {"@type": "BlogPosting", "headline": "Proxy Model From Polymarket's 15 Minute Bitcoin Price", "articleBody": "Proxy Model From Polymarket's 15 Minute Bitcoin Price\n\nI found historical datasets for Polymarket's 15 minute up or down Bitcoin price and I think I can use this data to obtain useful signals via a proxy model. I'll start with linear regression to build a prediction model, to see if this transfer learning approach works here.\n\nYes, it will be overfitting, but for this signal generator it would be by design. The end goal is to find features that improve the random forest's split rules, thus further improving the win rate.", "url": "https://illya.sh/thoughts/proxy-model-from-polymarkets-15-minute-bitcoin-price", "mainEntityOfPage": "https://illya.sh/thoughts/proxy-model-from-polymarkets-15-minute-bitcoin-price", "datePublished": "2026-02-18T16:06:22+00:00", "dateModified": "2026-02-18T16:06:22+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/proxy-model-from-polymarkets-15-minute-bitcoin-price.png"}, {"@type": "BlogPosting", "headline": "After tweaking the existing set of base learner models, the random-forest driven trading model factory contin...", "articleBody": "After tweaking the existing set of base learner models, the random-forest driven trading model factory continues to improve\n\nThe win rate for predicting Bitcoin's 5-minute price moves (binary) is now approaching 54%. A win rate of ‚âà56% should suffice to accommodate for transaction costs. Win rates over 60% is where it starts to get interesting.", "url": "https://illya.sh/thoughts/after-tweaking-the-existing-set-of-base-learner-models-the", "mainEntityOfPage": "https://illya.sh/thoughts/after-tweaking-the-existing-set-of-base-learner-models-the", "datePublished": "2026-02-18T14:30:10+00:00", "dateModified": "2026-02-18T14:30:10+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/after-tweaking-the-existing-set-of-base-learner-models-the.jpg"}, {"@type": "BlogPosting", "headline": "Expert optimization is going well, and I'm starting to move towards the alpha in 5-minute Bitcoin price marke...", "articleBody": "Expert optimization is going well, and I'm starting to move towards the alpha in 5-minute Bitcoin price markets\n\nI'm not claiming that the model that I currently have is meaningful (it's NOT!), but it's getting closer to interesting win rate ratios (>55%)", "url": "https://illya.sh/thoughts/expert-optimization-is-going-well-and-im-starting-to-move", "mainEntityOfPage": "https://illya.sh/thoughts/expert-optimization-is-going-well-and-im-starting-to-move", "datePublished": "2026-02-17T17:12:07+00:00", "dateModified": "2026-02-17T17:12:07+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/expert-optimization-is-going-well-and-im-starting-to-move.jpg"}, {"@type": "BlogPosting", "headline": "Currently, this is the most valued expert in my model factory pipeline", "articleBody": "Currently, this is the most valued expert in my model factory pipeline\n\nNot because it does anything useful, but precisely because it does not\n\nThe expert randomly emits positive(buy) or negative(sell) signals. This is a rough baseline for random behaviour. Very useful for the integration testing of the pipeline and identifying noise", "url": "https://illya.sh/thoughts/currently-this-is-the-most-valued-expert-in-my-model-factory", "mainEntityOfPage": "https://illya.sh/thoughts/currently-this-is-the-most-valued-expert-in-my-model-factory", "datePublished": "2026-02-17T16:33:29+00:00", "dateModified": "2026-02-17T16:33:29+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/currently-this-is-the-most-valued-expert-in-my-model-factory.jpg"}, {"@type": "BlogPosting", "headline": "My random forest looks much better after the clean-up", "articleBody": "My random forest looks much better after the clean-up\n\nThe feature matrix has been refactored to only include features from which the random forest will be able to learn more effectively. This should greatly reduce the noise\n\nNow, it's time to optimize signals üòÑ", "url": "https://illya.sh/thoughts/my-random-forest-looks-much-better-after-the-clean-up", "mainEntityOfPage": "https://illya.sh/thoughts/my-random-forest-looks-much-better-after-the-clean-up", "datePublished": "2026-02-17T15:01:07+00:00", "dateModified": "2026-02-17T15:01:07+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/my-random-forest-looks-much-better-after-the-clean-up.png"}, {"@type": "BlogPosting", "headline": "My ML model factory produced this amazing model that trades Bitcoin on 5-minute intervals, cut off at each 5t...", "articleBody": "My ML model factory produced this amazing model that trades Bitcoin on 5-minute intervals, cut off at each 5th minute (very similar to Polymarket's 5 minute BTC markets) and it made over 200K trades in ‚âà7 months\n\nStats:\n- 200K trades\n- 6.69% profit\n- 49% win rate\n\nSo I've pretty much discovered a coin flip ü§£", "url": "https://illya.sh/thoughts/my-ml-model-factory-produced-this-amazing-model-that-trades", "mainEntityOfPage": "https://illya.sh/thoughts/my-ml-model-factory-produced-this-amazing-model-that-trades", "datePublished": "2026-02-17T14:57:38+00:00", "dateModified": "2026-02-17T14:57:38+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/my-ml-model-factory-produced-this-amazing-model-that-trades.png"}, {"@type": "BlogPosting", "headline": "They say that AI agents will replace all white collar-jobs in the next 6-12 months üòÑ", "articleBody": "They say that AI agents will replace all white collar-jobs in the next 6-12 months üòÑ\n\nSo LLMs only have 5-11 months to learn about car washing.\n\nThis simple prompt breaks ChatGPT, DeepSeek, Qwen and Kimi. Works on Gemini though.", "url": "https://illya.sh/thoughts/they-say-that-ai-agents-will-replace-all-white-collar-jobs", "mainEntityOfPage": "https://illya.sh/thoughts/they-say-that-ai-agents-will-replace-all-white-collar-jobs", "datePublished": "2026-02-17T13:35:07+00:00", "dateModified": "2026-02-17T13:35:07+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/they-say-that-ai-agents-will-replace-all-white-collar-jobs.jpg"}, {"@type": "BlogPosting", "headline": "The random forest that guides my model factory needs refactoring", "articleBody": "The random forest that guides my model factory needs refactoring\n\nWhile the current architecture shows good prospects for generating profitable trading models, the random forest is currently a bit of a mess üòÖ If you look at the image attached to the post, you can see why.\n \nSince the random forest can‚Äôt extrapolate, features like the date and source segment will just make the forest learn on noise (it will train on association between those features, e.g. it‚Äôs not very useful to learn that volume in 2025 was higher than in 2024). But this was expected. The goal was to validate an architectural approach that could work. Now it‚Äôs time for optimizations and changes. Actually, changes before optimizations.\n\nAnother thing that I‚Äôll get rid of is the hybrid spine for supporting data from multiple timeframes, as the model didn‚Äôt extract any meaningful alpha ‚Äî and some of it has even confused the random forest. I‚Äôm sure there is way to make even with limited data, but I‚Äôll be moving to testing it on dataset for which I have access to highly granular data (hello, Bitcoin!). So the logic of the data loader in the pipeline will be greatly simplified.\n\nI‚Äôll also make the labeler configurable, so that you can use the same set of features for different types of predictions. For example, you could have the ‚Äúunconstrained‚Äù standard deviation labelling in the sense hat you can enter and exit the position at any time, to constrained logic scenarios such as the ones of Polymarket‚Äôs 5-minute price predictions on Bitcoin, where you can only enter a position at specific times, and the resolution happens at specific times (e.g. at the end of every 5th minute of the day, starting from 0).\n\nThe core logic of the ML pipeline remans the same.", "url": "https://illya.sh/thoughts/the-random-forest-that-guides-my-model-factory-needs", "mainEntityOfPage": "https://illya.sh/thoughts/the-random-forest-that-guides-my-model-factory-needs", "datePublished": "2026-02-16T15:03:02+00:00", "dateModified": "2026-02-16T15:03:02+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/the-random-forest-that-guides-my-model-factory-needs.png"}, {"@type": "BlogPosting", "headline": "One idea for vibe-coding profitable trading strategies is to strictly define a pipeline of your ML strategy f...", "articleBody": "One idea for vibe-coding profitable trading strategies is to strictly define a pipeline of your ML strategy factory, and restrict your AI agent to only write code within your tightly-defined framework.\n\nI'm currently exploring this. To add a new signal, the agent will need to extend this contract.", "url": "https://illya.sh/thoughts/one-idea-for-vibe-coding-profitable-trading-strategies-is-to", "mainEntityOfPage": "https://illya.sh/thoughts/one-idea-for-vibe-coding-profitable-trading-strategies-is-to", "datePublished": "2026-02-13T14:55:22+00:00", "dateModified": "2026-02-13T14:55:22+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/one-idea-for-vibe-coding-profitable-trading-strategies-is-to.jpg"}, {"@type": "BlogPosting", "headline": "Overfitting In Machine Learning Models Visualized", "articleBody": "Overfitting In Machine Learning Models Visualized\n\nI came across the visualization of 3 functions which demonstrate how a model can become overfit to noise.\n\nSo we are trying to estimate the function whose graph visualization is shown in figure A. In A you see the true underlying function representation. Figures B and C are estimates for the true function shown in Figure A. In Figures B and C, a thin-plate spline fit is used to approximate the function shown in A. To obtain the function/model in Figure C, a smaller level of smoothness was used than in Figure B (less smoothing means more flexibility/effective degrees of freedom).\n\nFigure B approximates the function pretty well, while Figure C fits the training data *perfectly*, with ZERO errors on the training data (in figure C you can see that all of the red points are on the yellow surface). However, you notice that the surface in figure C is a lot more variable/wiggly than in figure A - this is because in the process of constructing the function model in Figure C - we overfit on the noise in the training set!\n\nSo by overfitting you are making your model extremely sensitive/adapted to the training data, and the model ends up learning from the noise instead of actual signals. Regarding a machine-learning approach to trading/finance - this is how you get >90% success rate while backtesting your model, but around random performance with novel real-world price data.\n\nYou have to remember than beyond trivial use-cases, your models are never going to be perfect ‚Äî and if they are, you are probably overfitting. You have to remember that any ML model that you construct *NEVER* perfect, due to the presence of irreducible errors, bias and variance.", "url": "https://illya.sh/thoughts/overfitting-in-machine-learning-models-visualized", "mainEntityOfPage": "https://illya.sh/thoughts/overfitting-in-machine-learning-models-visualized", "datePublished": "2026-02-13T13:44:06+00:00", "dateModified": "2026-02-13T13:44:06+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/overfitting-in-machine-learning-models-visualized.jpg"}, {"@type": "BlogPosting", "headline": "Okay I found another source of overfitting/data leakage in my trading ML factory üòÅ", "articleBody": "Okay I found another source of overfitting/data leakage in my trading ML factory üòÅ\n\nThe triple barrier label is computed at *position close time*, which is determined by which deviation from price returns hits first (upper bound, lower bound or timeout). The training set was including everything until a specific date, *BUT* many positions before that date close in the future - after the training cutoff date. I only got a few confirmed leaks from my run - but still overfitting.\n\nThese series of posts I‚Äôve been making, provide you with a small practical glance into why mere backtest performance is not an indication of absolutely NOTHING. This is also what essentially goes into constructing an automated, machine-learning driven trading strategy (or rather a factory for those!). It‚Äôs very easy to overfit.\n\nThere are many large-following accounts on X/Twitter that post about the strategies that they discovered, with impressive performance on historical data. Usually those same accounts have ulterior motives, such as selling courses or access to trading signal groups. Be aware that their backtest results are NOT an indication that their strategy will work in a real-world scenario. As a general rule, if those pay-to-access strategies really performed that well with novel price data - the individuals running those strategies would be much better off operating on a fee-basis (i.e. they charge a percentage of returns on your capital, rather than a fixed fee.", "url": "https://illya.sh/thoughts/okay-i-found-another-source-of-overfitting-data-leakage-in", "mainEntityOfPage": "https://illya.sh/thoughts/okay-i-found-another-source-of-overfitting-data-leakage-in", "datePublished": "2026-02-11T18:32:21+00:00", "dateModified": "2026-02-11T18:32:21+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/okay-i-found-another-source-of-overfitting-data-leakage-in.jpg"}, {"@type": "BlogPosting", "headline": "My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold's re...", "articleBody": "My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold's return in the same time period (‚âà12%)\n\nThis was after running in on price data of gold futures most recent drawdown from ‚âà$5600. The model yielded its largest returns by longing the pullbacks during the correction and closing the positions at the right time (the exit logic is based on deviations from price returns). This is very interesting, as it could be an indication of model's utility during drawdowns. Its largest loss was also during the same event frame, but I believe that can be greatly optimized with model parameters and thresholds (which I haven‚Äôt optimized at all yet).\n\nThe entry/exit times are imprecise, because the strategy is based on volume dollar bars sampling, which I'm extracting/approximating from OCHLV data from TradingView.\n\nEntry/exit decisions are driven by a random forest, which learns from the signals of various \"experts‚Äù, and a tripple-barrier outcome of those signals. In practice, the experts are just Python functions which perform statistical analysis on the dollar volume feature matrix containing combined price history from various timeframes, and output a buy(1), sell(-1) or do nothing(0) signal. Then, the buy and sell signals from experts are passed to a random forest in a matrix, which then ‚Äúlearns‚Äù which combination of expert calls yields the most correct returns. The experts only produce position entry signals, each position is then closed based on standard deviation of price returns (intuitively: the position is closed when the price exhibits an ‚Äúunusual‚Äù perceptual move, either up or down).\n\nThis trading ML factory was designed to work under significant constraints of historical price data. I limited it to the one available for export in TradingView. For example, 1 hour candle data only goes back a little over 2 years. In principle, there is little alpha to be extracted from here, but I was able to mitigate it by following a ‚Äúhybrid spine‚Äù approach, where multiple timeframes are combined statistically and made available in the matrix passed to the random forest. More granular OCHLV data is scarce (e.g. the 1 minute OCHLV data that I have available for gold futures, goes back less than a month, and there are some continuity gaps in it), however it is still useful to provide some micromarket structure int terms of volume that the random forest can rely on. As such, the factory performs best on higher timeframes (4h and above).\n\nThe ML factory learns and predicts based on the prices of multiple assets (and the ratios between them). At the moment, it computes our to gold, silver and copper futures OCHLV data. But it‚Äôs designed to be dynamically extendable by adding CSVs with new asset price data.\n\nCurrently, I‚Äôm very much at the prototyping/exploratory phase with this project, so I don‚Äôt have the code publicly available yet. If you want access to the code, just reach out to me. I‚Äôm not claiming in any way that it will consistently yield >20% returns, and I understand that the trade count, trading data set granularity and backtesting timeframe are not sufficient for a strong statistical confidence in evaluating the quality of the model factory, but I am claiming that it provides a starting point for directing the factory‚Äôs approach. Also, trading costs, slippage, position sizing are not accounted for. Even with limited historical data, I believe that a careful selection of experts can yield profitable automated strategies.", "url": "https://illya.sh/thoughts/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily", "mainEntityOfPage": "https://illya.sh/thoughts/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily", "datePublished": "2026-02-11T17:46:44+00:00", "dateModified": "2026-02-11T17:46:44+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily.jpg"}, {"@type": "BlogPosting", "headline": "So I solved the overfitting issue, and as I suspected backtest data was leaking into the training set", "articleBody": "So I solved the overfitting issue, and as I suspected backtest data was leaking into the training set\n\nIn 13 trading days it yields ‚âà12% with gold on an hourly timeframe target. For silver it goes up to ‚âà30% (expectedly)\n\nI'm going to add 15m, 5m and 1m data to see how it performs during the drawdown", "url": "https://illya.sh/thoughts/so-i-solved-the-overfitting-issue-and-as-i-suspected", "mainEntityOfPage": "https://illya.sh/thoughts/so-i-solved-the-overfitting-issue-and-as-i-suspected", "datePublished": "2026-02-11T15:34:33+00:00", "dateModified": "2026-02-11T15:34:33+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/so-i-solved-the-overfitting-issue-and-as-i-suspected.jpg"}, {"@type": "BlogPosting", "headline": "My random-forest guided meta model factory discovered a trading strategy which profits 87773.98% in the past...", "articleBody": "My random-forest guided meta model factory discovered a trading strategy which profits 87773.98% in the past 7 years\n\nThere is definitely no overfitting here üòÇ", "url": "https://illya.sh/thoughts/my-random-forest-guided-meta-model-factory-discovered-a", "mainEntityOfPage": "https://illya.sh/thoughts/my-random-forest-guided-meta-model-factory-discovered-a", "datePublished": "2026-02-10T19:04:11+00:00", "dateModified": "2026-02-10T19:04:11+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/my-random-forest-guided-meta-model-factory-discovered-a.jpg"}, {"@type": "BlogPosting", "headline": "Don't Be Fooled By Backtest Performance", "articleBody": "Don't Be Fooled By Backtest Performance\n\nI've been coming accross of posts on X from accounts showcasing 70%+ returns when backtesting their vibe-coded trading strategies. Don't be misguidaded by those numbers and claims.\n\nMost likely it performs well on historical data, but is random at best with new data.Agents are not that good at developing profitable trading strategies, as they tend to stick 'default' statistical measures like RSI and hope for the best üòÑ If it was that easy - everyone would do it, thus erasing any alpha\n\nThese vibe-coded models most likely overfitting", "url": "https://illya.sh/thoughts/dont-be-fooled-by-backtest-performance", "mainEntityOfPage": "https://illya.sh/thoughts/dont-be-fooled-by-backtest-performance", "datePublished": "2026-02-07T19:12:58+00:00", "dateModified": "2026-02-07T19:12:58+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/illya_gerasymchuk_thoughts.webp"}, {"@type": "BlogPosting", "headline": "No AGI With LLMs In Their Current Form.", "articleBody": "No AGI With LLMs In Their Current Form.\n\nGenerative models are just one type of models in ML. Neither self-driving cars, nor inference about financial data primarily rely on generative models. Perhaps you can have LLM program that logic on the go, but that would require the LLM to effectively dominate those tasks (i.e. effectively become good at driving a car and being able to build sound financial models via a programming language), and given the probabilistic nature of the inference I don‚Äôt think we can have LLMs and agents fully taking over these critical areas. Regarding the probabilistic nature, I‚Äôm specifically referring the unsecured/unparameterized probability - it‚Äôs hard to modulate the potential error.\n\nRight now, agent setups are very good at boilerplate, repeatable code - and most of the code is like that. Most of software development is already abstracted by various frameworks, and a lot of the softwares do very similar tasks and are implemented in similar ways, following specific patterns. Anecdotally, think of a generic SaaS - there are several competing products that do basically the same thing, because they solve a common problem. Agents/LLMs are already great at predicting code of which they have a lot of examples in their training set. This alone, is a massive productivity boost, especially if you are prototyping/iterating.\n\nTo give a more concrete answer, the current tech would probably top out at multi-agent, multi-model and some form of DSL(s). So you would have multiple agents, some of them using distinct models. For example, one model for planning, another model for writing code, another model for debugging, etc. The DSLs would be used for both: customizing agents and models (input) and the model would output the code in a DSL (output). So when you ask the model to generate code, it would output it in a higher-level programming language/DSL, and then that one would either be compiled down/translated into a different target, wether that is machine code or a programming language like Python. The DSL design would be optimized for this ‚Äúgenerative development‚Äù - in practice it will make things like math-induced security issues more difficult for LLMs to make (e.g. the DSL forces the LLM to use pre-defined cryptographic primitives, and at compilation time type metadata is associated to enforce its correct usage across schemes). So at this tech‚Äôs peak, the LLMs probably won‚Äôt be outputting their code in directly Python. I don‚Äôt mean that this is the peak for generative models or ML field as a whole, but for the current state of the tech and the approaches it uses.\n\nBefore the tech tops out, however, I think there will be a security issue at scale, followed by an increased focus on security of agents and the the inferred code. Since many products will be using the same models to generate code, the same flawed security patterns will arise in many places, and it will be ‚Äúeasy‚Äù to exploit them at scale. Even with detailed instructions, SOTA models still generate vulnerabilities. Even though most of the code is fine, it takes one small issue in a sensitive place to compromise the system - and if you write any non-trivial code with LLMs, you will run into them. I‚Äôve encountered a lot of this issues myself, and in the code that I‚Äôve reviewed from other developers who wrote their code with LLMs. Proper context helps a lot, but it doesn‚Äôt resolve the probabilistic nature of the output.\n\nRegarding getting closer to human-like functionality, it will almost certainly require other ML schemes/approaches in addition to what we have now and further refining and combination of existing approaches. I think we will soon go into meta-models, where a model internally uses other models/sub models to produce the output (in its simplest form, think of a random forest that ‚Äúchoses‚Äù the most appropriate sub-model to run or the output which one of the sub-model‚Äôs outputs to use for the next step) - this can help mitigate some of the risks arising from the probabilistic nature of the inference. That would require coordinated, specialized agents, powered by meta-models.\n\nWhere I think we have a lot to still to gain with the current tech, even if its progress freezes, is education. LLMs provide a novel way to interact with digital information, you can do it in the same way that you would interact with another human - via spoken language. Being able to formulate your very specific questions, in your very specific way and usually getting a correct answer to it still amazes me to this day. If you combine generative models with VR, you get a whole new dimension of experiencing information, allowing to learn more effectively.", "url": "https://illya.sh/thoughts/no-agi-with-llms-in-their-current-form", "mainEntityOfPage": "https://illya.sh/thoughts/no-agi-with-llms-in-their-current-form", "datePublished": "2026-02-05T17:07:46+00:00", "dateModified": "2026-02-05T17:07:46+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/illya_gerasymchuk_thoughts.webp"}, {"@type": "BlogPosting", "headline": "AI will follow a much more logarithmic growth than the hype may lead you to believe", "articleBody": "AI will follow a much more logarithmic growth than the hype may lead you to believe\n\nWe've been perpetually '6 months away from AGI', yet as amazing the SOTA generative models are - we're no where near that.\n\nI don't believe that the current generative ML architectures will be enough to deliver the promises even over the next decade. Generative models have their limits.\n\nThere's also a massive AI bubble in the U.S., wit the same entities over promising on results directly benefiting from public funds, which get counted as revenue many times over. Maybe this need a new term like, rerevenuezation (like rehypothecation with bonds) üòÑ\n\nWith that said, I don't think we're anywhere near the full benefits just from the tech we have available up to today. Agentic systems in particular.", "url": "https://illya.sh/thoughts/ai-will-follow-a-much-more-logarithmic-growth-than-the-hype", "mainEntityOfPage": "https://illya.sh/thoughts/ai-will-follow-a-much-more-logarithmic-growth-than-the-hype", "datePublished": "2026-02-03T12:58:26+00:00", "dateModified": "2026-02-03T12:58:26+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/illya_gerasymchuk_thoughts.webp"}, {"@type": "BlogPosting", "headline": "\"Random forest\" is currently my favorite term from financial ML", "articleBody": "\"Random forest\" is currently my favorite term from financial ML\n\n... TREES MAKE FINANCIAL DECISIONS NOW?? üå≥üòÑ", "url": "https://illya.sh/thoughts/random-forest-is-currently-my-favorite-term-from-financial", "mainEntityOfPage": "https://illya.sh/thoughts/random-forest-is-currently-my-favorite-term-from-financial", "datePublished": "2026-01-24T16:47:26+00:00", "dateModified": "2026-01-24T16:47:26+00:00", "keywords": "Illya Gerasymchuk, Financial & Software Engineer, financial markets, monetary policy, central banks, global liquidity, financial market structure, commodities, gold, silver, Bitcoin, crypto markets, AI systems, software engineering, financial law, machine learning, agentic AI systems, finance, cryptocurrency, Zero-Knowledge Proofs, blockchain", "author": {"@id": "https://illya.sh/#person"}, "publisher": {"@id": "https://illya.sh/#person"}, "image": "https://illya.sh/staticthoughts/data/images/random-forest-is-currently-my-favorite-term-from-financial.jpg"}]}
</script>
    
    <style>
        /* Shared base layout + profile header styles.
   Injected into templates via BASE_LAYOUT_AND_PROFILE_CSS placeholder. */

:root {
    /* Light Theme Variables */
    --bg-color: #f4f4f4;
    --container-bg: #ffffff;
    --box-bg: #fff;
    --text-color: #333;
    --secondary-text-color: #555;
    --light-text-color: #666;
    --link-color: #007bff;
    --link-hover-color: #0056b3;
    --border-color: #ddd;
    --soft-border-color: #eee;
    --dashed-border-color: #aaa;
    --box-shadow-color: rgba(0,0,0,0.08);
    --lightbox-bg: rgba(0, 0, 0, 0.9);
    --lightbox-close-bg: rgba(255, 255, 255, 0.8);
    --lightbox-close-hover-bg: rgba(255, 255, 255, 1);
    --lightbox-close-color: #000;
    --disabled-text-color: #aaa;
    --disabled-bg-color: #f9f9f9;
    --hover-bg-color: #eee;
}

/* Dark Theme Variables (applied via media query or body class) */
.dark-mode {
    --bg-color: #1a1a1a; /* Dark grey background */
    --container-bg: #2b2b2b; /* Slightly lighter container */
    --box-bg: #2b2b2b; /* Same as container for profile/thought boxes */
    --text-color: #e0e0e0; /* Light grey text */
    --secondary-text-color: #b0b0b0; /* Medium grey */
    --light-text-color: #999; /* Lighter grey for dates etc. */
    --link-color: #58a6ff; /* Lighter blue for links */
    --link-hover-color: #80bfff; /* Even lighter blue on hover */
    --border-color: #444; /* Darker border */
    --soft-border-color: #333; /* Even darker soft border */
    --dashed-border-color: #666; /* Darker dashed border */
    --box-shadow-color: rgba(255,255,255,0.08); /* Light shadow */
    --lightbox-bg: rgba(0, 0, 0, 0.95); /* Slightly more opaque */
    --lightbox-close-bg: rgba(50, 50, 50, 0.8);
    --lightbox-close-hover-bg: rgba(70, 70, 70, 1);
    --lightbox-close-color: #eee;
    --disabled-text-color: #777;
    --disabled-bg-color: #3a3a3a;
    --hover-bg-color: #383838;
}

/* Apply dark mode based on system preference */
@media (prefers-color-scheme: dark) {
    :root {
        /* Default to dark variables if system preference is dark */
        /* This will be overridden if .light-mode is explicitly set */
        --bg-color: #1a1a1a;
        --container-bg: #2b2b2b;
        --box-bg: #2b2b2b;
        --text-color: #e0e0e0;
        --secondary-text-color: #b0b0b0;
        --light-text-color: #999;
        --link-color: #58a6ff;
        --link-hover-color: #80bfff;
        --border-color: #444;
        --soft-border-color: #333;
        --dashed-border-color: #666;
        --box-shadow-color: rgba(255,255,255,0.08);
        --lightbox-bg: rgba(0, 0, 0, 0.95);
        --lightbox-close-bg: rgba(50, 50, 50, 0.8);
        --lightbox-close-hover-bg: rgba(70, 70, 70, 1);
        --lightbox-close-color: #eee;
        --disabled-text-color: #777;
        --disabled-bg-color: #3a3a3a;
        --hover-bg-color: #383838;
    }

    /* Ensure explicit light mode overrides system pref */
    .light-mode {
        --bg-color: #f4f4f4;
        --container-bg: #ffffff;
        --box-bg: #fff;
        --text-color: #333;
        --secondary-text-color: #555;
        --light-text-color: #666;
        --link-color: #007bff;
        --link-hover-color: #0056b3;
        --border-color: #ddd;
        --soft-border-color: #eee;
        --dashed-border-color: #aaa;
        --box-shadow-color: rgba(0,0,0,0.08);
        --lightbox-bg: rgba(0, 0, 0, 0.9);
        --lightbox-close-bg: rgba(255, 255, 255, 0.8);
        --lightbox-close-hover-bg: rgba(255, 255, 255, 1);
        --lightbox-close-color: #000;
        --disabled-text-color: #aaa;
        --disabled-bg-color: #f9f9f9;
        --hover-bg-color: #eee;
    }
}

/* --- Webfont: Literata (variable, WOFF2) for reading surfaces --- */
@font-face {
    font-family: 'Literata';
    src: url('/staticthoughts/data/fonts/literata/Literata-VF-latin.woff2') format('woff2-variations');
    font-style: normal;
    font-weight: 200 900;
    font-display: swap;
}
@font-face {
    font-family: 'Literata';
    src: url('/staticthoughts/data/fonts/literata/Literata-Italic-VF-latin.woff2') format('woff2-variations');
    font-style: italic;
    font-weight: 200 900;
    font-display: swap;
}

body {
    font-family: "Courier New", Courier, monospace;
    background-color: var(--bg-color); /* USE VAR */
    color: var(--text-color); /* USE VAR - Set default text color */
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition */
}

a {
    color: var(--link-color);
    text-decoration: none; /* Consistent link styling */
    transition: color 0.2s ease;
}
a:hover {
    color: var(--link-hover-color);
    text-decoration: underline; /* Underline on hover for clarity */
}
a:visited {
    color: var(--link-color); /* Ensure visited links use theme color */
}

.container {
    background-color: var(--container-bg); /* USE VAR */
    padding: 25px;
    border: 1px solid var(--border-color); /* USE VAR */
    max-width: 750px;
    width: 100%;
    box-sizing: border-box;
    box-shadow: 0 1px 4px var(--box-shadow-color); /* USE VAR */
    transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
}

/* Profile Box Styling */
.profile-box {
    border: 2px dashed var(--dashed-border-color); /* USE VAR */
    padding: 15px;
    margin-bottom: 30px;
    background-color: var(--box-bg); /* USE VAR */
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
}
.profile-content {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0; /* Remove vertical spacing */
    width: 100%;
}
.profile-img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 15px;
    border: 1px solid var(--soft-border-color); /* USE VAR */
    box-shadow: 0 0 0 4px #00aef5;
    flex-shrink: 0;
    cursor: pointer; /* Theme toggle on thoughts pages */
    transition: border-color 0.3s ease, box-shadow 0.3s ease; /* Smooth transition */
}
.profile-details {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}
.profile-name {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 2px;
    color: var(--text-color); /* Ensure uses variable */
}
.profile-title {
    color: var(--secondary-text-color); /* USE VAR */
    font-size: 0.95em;
}
.profile-links {
    font-size: 0.9em;
    color: var(--secondary-text-color); /* USE VAR */
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 8px 16px;
    padding: 0;
    margin-top: 12px;
    line-height: 1.4;
}
.profile-links a {
    text-decoration: none;
    color: var(--link-color); /* USE VAR */
    transition: color 0.2s ease;
    white-space: nowrap;
    padding: 2px 4px;
    border-radius: 3px;
    display: inline-block;
}
.profile-links a:hover {
    color: var(--link-hover-color); /* USE VAR */
    background-color: var(--hover-bg-color);
}

/* Screen-reader only content (kept semantic/SEO-visible, visually hidden). */
.visually-hidden {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Shared responsive */
@media (max-width: 600px) {
    body {
        padding: 10px;
    }
    .container {
        padding: 15px;
        max-width: 100%;
    }
    /* Adjusted Profile Box for Mobile */
    .profile-box {
        padding: 12px; /* Further reduced padding */
        margin-bottom: 25px; /* Further reduced margin */
    }
    /* Adjusted Profile Content for Mobile */
    .profile-content {
        align-items: center;
        justify-content: center;
        margin-bottom: 0; /* No spacing between profile content and links */
    }
    .profile-img {
        width: 50px;
        height: 50px;
        margin-right: 12px;
    }
    .profile-name {
        font-size: 1.1em;
    }
    .profile-title {
        font-size: 0.9em;
    }
    /* Adjusted Profile Links for Mobile */
    .profile-links {
        font-size: 0.82em;
        margin-top: 10px;
        gap: 6px 12px; /* Optimized gap for mobile */
        justify-content: center; /* Ensure centering on mobile too */
        line-height: 1.3;
    }
    .profile-links a {
        padding: 3px 6px; /* Slightly more padding for easier mobile tapping */
        border-radius: 4px;
    }
}

/* Extra small screens (iPhone SE, etc.) */
@media (max-width: 375px) {
    .profile-links {
        font-size: 0.78em;
        gap: 4px 8px; /* Tighter gap for very small screens */
        margin-top: 8px;
    }
    .profile-links a {
        padding: 2px 4px; /* Compact padding for very small screens */
        border-radius: 3px;
    }
}


        /* Thoughts Header - Section Title Style */
        .thoughts-header {
            border: none;
            background-color: transparent;
            padding: 0; 
            display: block; 
            font-size: 1.4em; 
            font-weight: bold;
            color: var(--text-color); /* USE VAR */
            margin-top: 0; 
            margin-bottom: 25px; 
            padding-bottom: 8px; 
            border-bottom: 2px solid var(--soft-border-color); /* USE VAR */
            text-align: center; 
            transition: color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
        }
        /* Apply Literata to the primary reading title */
        .thoughts-header {
            font-family: Georgia, 'Literata', serif;
            font-weight: 600;
            font-optical-sizing: auto;
        }

        /* Thought Box Styling */
        .thought-box {
            border: 2px dashed var(--dashed-border-color); /* USE VAR */
            padding: 10pt;
            padding-top: 1pt;
            padding-bottom: 1pt;
            margin-bottom: 14pt; 
            background-color: var(--box-bg); /* USE VAR */
            transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
        }

        /* Hover effect for clickable thought boxes (applied via JavaScript based on page type) */
        .thought-box.clickable:hover {
            background-color: var(--hover-bg-color);
            border-color: var(--text-color);
        }
        .thought-header {
            display: flex; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 0.5em;
            padding-bottom: 0px;
            font-size: 0.95em;
            color: var(--secondary-text-color); /* USE VAR */
        }
        .thought-user-img { 
             width: 25px;
             height: 25px;
             border-radius: 50%;
             object-fit: cover;
             border: 1px solid var(--soft-border-color); /* USE VAR */
             vertical-align: middle; 
             transition: border-color 0.3s ease; /* Smooth transition */
        }
        .thought-header .user-name {
            font-weight: bold;
            color: var(--text-color); /* USE VAR */
            margin: 0; 
        }
         .thought-header .separator {
             margin: 0 0.2em; 
             color: var(--light-text-color); /* Separator should probably use this */
         }
         .thought-header .date-time {
             color: var(--light-text-color); /* USE VAR */
             flex-shrink: 0; 
         }

        .thought-content p {
            margin-top: 0;
            margin-bottom: 10px;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-color); /* Ensure paragraph text uses variable */
        }
        /* Apply Literata to main reading paragraphs */
        .thought-content p,
        .quoted-thought-content p {
            font-family: 'Literata', Georgia, serif;
            font-weight: 270;
            font-optical-sizing: auto;
            line-height: 1.2;
        }
        .thought-image {
            margin-top: 15px; 
        }
        .thought-image .lightbox-trigger {
            display: block;
            max-width: 550px;  
            width: 100%; 
            margin-left: auto;
            margin-right: auto;
            cursor: pointer;
            overflow: hidden;
            border-radius: 8px;
            border: 1px solid var(--border-color); /* USE VAR */
            position: relative;
            transition: border-color 0.3s ease; /* Smooth transition */
        }
        .thought-image img.thought-img {
            display: block; 
            width: 100%; 
            height: auto; 
            transition: opacity 0.2s ease-in-out; 
        }
         .thought-image .lightbox-trigger:hover img.thought-img {
              opacity: 0.9; 
         }

        /* Lightbox Overlay */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--lightbox-bg); /* USE VAR */
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 40px;
            box-sizing: border-box;
            transition: background-color 0.3s ease; /* Smooth transition */
        }
        .lightbox-overlay.visible {
            display: flex; 
        }
        .lightbox-content {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 100%; 
            max-height: 100%;
        }
        .lightbox-content img {
            display: block;
            max-width: 100%; 
            max-height: 100%; 
            width: auto;
            height: auto;
            object-fit: contain;
            border: none;
            box-shadow: 0 5px 30px rgba(0,0,0,0.5); /* Keep shadow potentially dark */
        }
        .lightbox-close {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--lightbox-close-bg); /* USE VAR */
            color: var(--lightbox-close-color); /* USE VAR */
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 24px;
            font-weight: normal;
            line-height: 28px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.2s ease, color 0.2s ease; /* Smooth transition */
        }
        .lightbox-close:hover {
            background-color: var(--lightbox-close-hover-bg); /* USE VAR */
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .thoughts-header {
                font-size: 1.2em;
                margin-bottom: 20px;
            }
            .thought-box {
                padding: 10pt;
                padding-bottom: 1pt;
                padding-top: 1pt;
                margin-bottom: 14pt;
            }
             .thought-header {
                font-size: 0.85em; /* Even smaller font for mobile header */
                gap: 0.3em; /* Further reduce gap */
                padding-bottom: 0px; /* Reduce padding */
             }
             .thought-user-img {
                 width: 20px; /* Even smaller image on mobile */
                 height: 20px;
             }
             /* Optionally hide separator on very small screens if needed */
             /* .thought-header .separator { display: none; } */
        }

        /* Extra small screens (iPhone SE, etc.) */
        @media (max-width: 380px) {
             .thought-header {
                font-size: 0.8em; /* Even smaller font for very small screens */
                gap: 0.25em; /* Minimal gap */
             }
             .thought-header .date-time {
                flex-shrink: 1; /* Allow date to shrink if needed */
                min-width: 0; /* Allow text truncation */
             }

             .thought-image .lightbox-trigger {
                  /* Remove max-width on mobile to allow full width */
                  max-width: 100%; 
                  border-radius: 6px; 
             }

             .lightbox-overlay { padding: 10px; }
             .lightbox-content {
                  /* Adjust max size slightly for smaller padding */
                  /* REMOVE THESE - they were overriding the general rules */
                  /* max-width: calc(100vw - 20px); */
                  /* max-height: calc(100vh - 20px); */
              }
             .lightbox-close {
                 top: 5px; right: 5px; width: 28px; height: 28px;
                 font-size: 20px; line-height: 26px;
             }

            .pagination {
                margin-top: 20px;
                padding-top: 15px;
                font-size: 0.85em; /* Smaller text on mobile */
            }
             .pagination a, .pagination span {
                 padding: 6px 10px; /* Smaller padding */
                 margin: 0 2px; /* Less margin */
             }
             .pagination span.page-info {
                 display: none; /* Optionally hide page number on very small screens */
             }

            /* Individual thought navigation responsive */
            .individual-thought-navigation {
                display: flex !important;
                flex-direction: column !important;
                gap: 10px !important;
                margin-top: 20px !important;
            }
            .individual-thought-navigation .nav-button {
                width: 100% !important;
                margin-right: 0 !important;
                margin-left: 0 !important;
                text-align: center !important;
                box-sizing: border-box !important;
            }

            /* Quoted thought images on mobile */
            .quoted-thought-image img {
                max-width: 70%; /* Even smaller on mobile for better proportion */
                max-height: 200px; /* Smaller height limit on mobile */
            }
        }

        /* Pagination Styling */
        .pagination {
            margin-top: 30px; /* Space above pagination */
            padding-top: 20px; /* Space below last thought */
            border-top: 1px solid var(--soft-border-color); /* USE VAR */
            text-align: center;
            display: flex; /* Use flexbox for alignment */
            justify-content: space-between; /* Space out Prev, Info, Next */
            align-items: center;
            transition: border-color 0.3s ease; /* Smooth transition */
        }
        .pagination a, .pagination span {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 4px;
            border: 1px solid var(--border-color); /* USE VAR */
            border-radius: 4px;
            color: var(--link-color); /* USE VAR */
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
            font-size: 0.9em;
        }
        .pagination a:hover {
            background-color: var(--hover-bg-color); /* USE VAR */
            color: var(--link-hover-color); /* USE VAR */
        }
        .pagination span.disabled {
            color: var(--disabled-text-color); /* USE VAR */
            background-color: var(--disabled-bg-color); /* USE VAR */
            cursor: default;
            border-color: var(--border-color); /* USE VAR - Use regular border color for consistency */
        }
        .pagination span.page-info {
             border: none; 
             color: var(--secondary-text-color); /* USE VAR */
             background-color: transparent;
        }

        /* Quoted Thought Styling */
        .quoted-thought-container {
            margin-top: 15px;
            border-left: 3px solid var(--border-color);
            padding-left: 15px;
            transition: border-color 0.3s ease;
        }

        .quoted-thought-box {
            border: 1px solid var(--soft-border-color);
            border-radius: 8px;
            padding: 12px;
            background-color: var(--box-bg);
            font-size: 0.9em; /* Slightly smaller text */
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .quoted-thought-box:hover {
            background-color: var(--hover-bg-color);
            cursor: pointer;
        }

        .quoted-thought-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        .quoted-thought-user-img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 8px;
            border: 1px solid var(--soft-border-color);
            transition: border-color 0.3s ease;
        }

        .quoted-user-name {
            font-weight: bold;
            color: var(--text-color);
            margin-right: 5px;
        }

        .quoted-thought-date-time {
            color: var(--light-text-color);
            margin: 0;
            font-size: 0.9em;
        }

        .quoted-thought-permalink {
            color: var(--light-text-color);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .quoted-thought-permalink:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        /* Mobile responsive adjustments for quoted thoughts */
        @media (max-width: 600px) {
            .quoted-thought-container {
                padding-left: 10px;
                margin-top: 12px;
            }
            
            .quoted-thought-box {
                padding: 10px;
                font-size: 0.85em;
            }
            
            .quoted-thought-user-img {
                width: 20px;
                height: 20px;
                margin-right: 6px;
            }
            
            .quoted-thought-header {
                font-size: 0.8em;
            }
        }

        /* Theme Feedback Styling */
        .theme-feedback {
            position: fixed;
            top: 20px; /* Position from the top */
            left: 50%;
            transform: translateX(-50%); /* Center horizontally */
            background-color: var(--container-bg); /* Use theme background */
            color: var(--text-color); /* Use theme text color */
            padding: 10px 20px;
            border-radius: 20px; /* Rounded corners */
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            font-size: 0.9em;
            z-index: 1001; /* Above lightbox overlay */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease, top 0.4s ease;
            white-space: nowrap;
        }
        .theme-feedback.visible {
            opacity: 1;
            visibility: visible;
            top: 30px; /* Slightly move down when visible */
        }

        /* Quoted thought styles */
        .quoted-thought-container {
            margin-top: 16px;
            position: relative;
            padding: 0;
        }
        
        .quoted-thought-box {
            border-left: 3px solid var(--secondary-text-color);
            background: linear-gradient(135deg, 
                rgba(128, 128, 128, 0.03) 0%, 
                rgba(128, 128, 128, 0.01) 100%);
            border-radius: 0 12px 12px 0;
            padding: 14px 16px;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .quoted-thought-box:hover {
            background: linear-gradient(135deg, 
                rgba(128, 128, 128, 0.08) 0%, 
                rgba(128, 128, 128, 0.03) 100%);
            border-left-color: var(--text-color);
        }
        
        .quoted-thought-box::before {
            content: "";
            position: absolute;
            left: -3px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, 
                var(--secondary-text-color) 0%, 
                transparent 100%);
            border-radius: 3px 0 0 3px;
        }
        
        .quoted-thought-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            gap: 8px;
        }
        
        .quoted-thought-user-img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            flex-shrink: 0;
            opacity: 0.9;
        }
        
        .quoted-thought-user-info {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 0;
        }
        
        .quoted-user-name {
            font-weight: 500;
            font-size: 1.1em;
            color: var(--text-color);
            line-height: 1.2;
            opacity: 0.85;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .quoted-thought-date-time {
            font-size: 0.72em;
            color: var(--secondary-text-color);
            line-height: 1.2;
            opacity: 0.8;
            white-space: nowrap;
        }
        
        .quoted-thought-permalink {
            color: inherit;
            text-decoration: none;
            transition: all 0.2s ease;
            border-radius: 3px;
            padding: 1px 3px;
            margin: -1px -3px;
        }
        
        .quoted-thought-permalink:hover {
            color: var(--text-color);
            background-color: rgba(128, 128, 128, 0.1);
            text-decoration: none;
        }
        
        .quoted-thought-content p {
            font-size: 0.95em;
            margin: 0;
            color: var(--text-color);
            opacity: 0.9;
        }
        
        .quoted-thought-image {
        }
        
        .quoted-thought-image img {
            max-width: 80%; /* Smaller than main thought images */
            max-height: 300px; /* Limit height to maintain proportions */
            width: auto;
            height: auto;
            border-radius: 8px;
            border: 1px solid rgba(128, 128, 128, 0.15);
            transition: border-color 0.2s ease;
            object-fit: cover;
        }
        
        .quoted-thought-image img:hover {
            border-color: var(--border-color);
        }

        /* Action Bar Styling */
        .thought-actions {
            padding-top: 8pt;
        }
        .action-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px; /* small gap without changing height */
        }
        .thread-links {
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            gap: 3px;
            min-height: 1.2em; /* one line high */
            min-width: 0; /* allow flex shrink for ellipsis */
            flex: 1 1 auto;
            color: var(--secondary-text-color);
            font-size: 0.9em;
            font-family: 'Literata', Georgia, serif; /* match reading surface */
            font-weight: 270;
            font-optical-sizing: auto;
            line-height: 1.2;
        }
        .thread-links-prefix { opacity: 0.9; margin-right: 2px; }
        .thread-chip {
            display: inline-block;
            padding: 0 5px; /* compact */
            border: 1px solid var(--soft-border-color);
            border-radius: 5px; /* rectangular with subtle rounding */
            color: var(--secondary-text-color);
            font-size: 0.85em;
            text-decoration: none;
            vertical-align: middle;
        }
        .thread-chip.primary {
            font-weight: 300;
            flex: 0 1 auto; /* allow shrink, but don't grow unnecessarily */
            width: max-content; /* size to text when space allows */
            max-width: 100%;   /* but never exceed available space */
            min-width: 0;      /* enable shrink inside flex */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .thread-chip.more { pointer-events: none; }
        .thread-chip:hover { background: var(--hover-bg-color); border-color: var(--border-color); color: var(--text-color); text-decoration: none; }

        .action-separator {
            height: 1px;
            background: repeating-linear-gradient(
                to right,
                var(--light-text-color) 0px,
                var(--light-text-color) 2px,
                transparent 2px,
                transparent 6px
            );
            margin-bottom: 2pt;
            opacity: 0.6;
        }

        .action-buttons {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            flex: 0 0 auto; /* prevent growth; leave width to thread-links */
        }

        .share-button {
            background: transparent;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0;
            border-radius: 4px;
            color: var(--secondary-text-color);
            transition: color 0.2s ease, transform 0.2s ease;
            font-family: inherit;
            outline: none;
            margin-right: 2pt;
            -webkit-tap-highlight-color: transparent;
            text-shadow: 0 0 1px rgba(0,0,0,0.5), 0 0 4px rgba(0,0,0,0.35);
        }

        .share-button:hover {
            color: var(--text-color);
            transform: scale(1.1);
        }

        .share-button:active {
            transform: scale(0.95);
            color: var(--text-color);
        }

        /* Share Feedback Toast */
        .share-feedback {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-color);
            color: var(--bg-color);
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 0.9em;
            z-index: 1001;
            animation: slideUp 0.3s ease-out;
            max-width: 90%;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Mobile optimizations for action bar */
        @media (max-width: 600px) {
            .action-row { gap: 4px; }
            .thread-links { max-width: none; font-size: 0.9em; }
            .share-button {
                margin-right: 2pt;
                padding: 0;
                font-size: 1.3em;
            }
            .action-separator {
                margin-bottom: 2pt;
            }
            .thought-actions {
                padding-top: 8pt;
            }
        }

        .comment-button {
            background: transparent;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0;
            border-radius: 4px;
            color: var(--secondary-text-color);
            transition: color 0.2s ease, transform 0.2s ease;
            font-family: inherit;
            outline: none;
            margin-right: 6pt; /* Extra gap before share icon */
            -webkit-tap-highlight-color: transparent;
            text-decoration: none;
            text-shadow: 0 0 0.5px rgba(0,0,0,0.5), 0 0 4px rgba(0,0,0,0.35);
        }

        .comment-button:hover {
            color: var(--text-color);
            transform: scale(1.1);
        }

        .comment-button:active {
            transform: scale(0.95);
            color: var(--text-color);
        }

    </style>

    <!-- Theme Feedback Element -->
    <div id="theme-feedback" class="theme-feedback" aria-live="polite"></div>

</head>
<body>
    <div class="container">
        <div class="profile-box">
    <div class="profile-content">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="Illya Gerasymchuk profile photo" class="profile-img">
        <div class="profile-details">
            <div class="profile-name">Illya Gerasymchuk</div>
            <div class="profile-title">Financial & Software Engineer</div>
        </div>
    </div>
    <div class="profile-links">
        <a href="https://illya.sh/" target="_blank" title="About Illya Gerasymchuk (Homepage)" aria-label="About Illya Gerasymchuk (Homepage)">üè† About Illya</a><a href="https://illya.sh/threads/">üßµ Threads</a><a href="https://illya.sh/thoughts/topics/">üìÇ Topics</a><a href="mailto:hello@illya.sh" target="_blank">‚úâÔ∏è Email</a><a href="https://twitter.com/illyaGera" target="_blank">üê¶ Twitter/X</a><a href="https://illya.sh/thoughts/feed.xml" target="_blank">üì° RSS</a>
    </div>
</div>

        <h1 class="thoughts-header">Machine Learning</h1>
<p class="threads-description" style="margin: -10px 0 25px 0; color: var(--secondary-text-color); text-align: center; font-size: 0.95em; line-height: 1.35;">Ongoing notes on machine learning and AI systems, including forecasting models, evaluation techniques, and practical workflows for financial and technical analysis.</p>

<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../using-neural-networks-to-find-imbalances-in-limit-order" class="thought-permalink">2026-02-27 12:29</a></p>
    </div>
    <div class="thought-content">
        <p>Using Neural Networks To Find Imbalances In Limit Order Books<br><br>I&#x27;ve been working on model factory that predicts short-term asset movements. The model focuses on predicting whether the price of an asset at a future time T+c will be below or above the current asset&#x27;s price at time T. c is an arbitrary constant which in my model represents the number of minutes.<br><br>Currently, it&#x27;s structured to match Polymarket&#x27;s 5 minute BTC up or down markets, so this model can be used for trading on those markets. In this setup, the return is binary -- you either almost double or lose the whole position (assuming an entry as within a small delta of the market open). But this model can also be easily adapted to long/short futures positions with more flexibility on entry or exit times ‚Äî it would require adapting the labeler and the backtest configuration (namely the cost model and position sizing).<br><br>The first version of the model factory relied on features derived from 1 minute OCHLV data for Bitcoin. I focused on setting up a multi-model pipeline, and generalize it into a configurable DSL-like experience. I also focused on avoiding a big part of overfitting/looking forward and doing the first level of parameter optimization. I was able to obtain a small edge (‚âà0.54 win rate), and short-run live tests showed the model to be profitable, however I‚Äôm not very sure how resilient it is to regime changes, nor I find the computed edge sufficient (the win rate is subject to the error from the models). I also wasn‚Äôt expecting to achieve a meaningful edge with just OCHLV data, so I‚Äôm integrating limit order book (LOB) data in order to extract price movement predictive patterns from the lower level dynamics that end up determining the price.<br><br>Given that the order book drives the market price, its reasonable to assume that there is a function that expresses the relationship between the current order book state, and in which direction that state is more likely to move the price in the short-term. It‚Äôs my first time working with LOB data, so I looked for papers which explore a framework for modeling price predictions based on a multi-level LOB with price and volume data for bid and ask at each level. After filtering through several options, I settled on one titled ‚ÄúDeepLOB: Deep Convolutional Neural Networks for Limit Order Books‚Äù by Zihao Zhang, Stefan Zohren, and Stephen Roberts. I liked it because the authors taking care in avoiding overfitting and leaking forwarding the data, by splitting the data set into one for training, one for validation and one for testing. The model is trained on the training set, the hyperparameters are optimized on the validation set, and the verification/backtesting is done on the test set. I also wanted to integrate neural networks into the pipeline, and DeepLOB model uses a Convolutional Neural Network (CNN) and a Long Short-Term Memory (LSTM) network in its construction.<br><br>The neural networks in DeepLOB works as follows. First, the raw LOB data passes through a CNN to summarize/extract patterns from the data via filters whose weights are learned by the network. The output then goes through the inception module, which is another CNN which operates with multiple convolutional filters if different sizes to capture multiple time window patterns. Then, the resulting matrix is passed to LSTM, which is a recurrent neural network, meaning it‚Äôs able to maintain ‚Äúmemory‚Äù of the past state when evaluating the new state. LSTM outputs a vector, which is then multiplied by a weight matrix to produce 3 raw scores (logits), which then get mapped to probability for each one of the 3 classes via Softmax: (Up, No Change, Down), which serve as a trading signal.<br><br>I‚Äôll be incorporating something similar as signals/experts and/or features in the existing pipeline of my model factory. I‚Äôll also extend the pipeline to add an additional split for the validation set to optimize the hyper parameters of the random forest. I‚Äôll upload the code to GitHub soon, but note that it‚Äôs a work in progress.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/using-neural-networks-to-find-imbalances-in-limit-order.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/using-neural-networks-to-find-imbalances-in-limit-order.jpg" alt="Using Neural Networks To Find Imbalances In Limit Order Books" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/using-neural-networks-to-find-imbalances-in-limit-order" target="_blank" rel="noopener" aria-label="Open Illya's thread: Using Neural Networks To Find Imbalances In Limit Order Books">üßµ Using Neural Networks To Find Imbalances In Limit Order Books</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=using-neural-networks-to-find-imbalances-in-limit-order" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/using-neural-networks-to-find-imbalances-in-limit-order" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../the-random-forests-features-have-been-heavily-refactored-i" class="thought-permalink">2026-02-20 16:51</a></p>
    </div>
    <div class="thought-content">
        <p>The random forest&#x27;s features have been heavily refactored. I also replaced the polymarket feature with lookahead bias (the proxy model) with a combination of other indicators.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/the-random-forests-features-have-been-heavily-refactored-i.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/the-random-forests-features-have-been-heavily-refactored-i.jpg" alt="The random forest&#x27;s features have been heavily refactored. I also replaced the polymarket feature with lookahead bias (the proxy model)..." class="thought-img"></a>
        </div>
        <div class="quoted-thought-container">
    <div class="quoted-thought-box">
        <div class="quoted-thought-header">
            <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="quoted-thought-user-img">
            <div class="quoted-thought-user-info">
                <span class="quoted-user-name">Illya Gerasymchuk</span>
                <span class="quoted-thought-date-time">
                    <a href="as-a-result-of-the-first-step-in-optimizing-prioritizing-the" class="quoted-thought-permalink">2026-02-20 15:26</a>
                </span>
            </div>
        </div>
        <div class="quoted-thought-content">
            <p>As a result of the first step in optimizing/prioritizing the random forest‚Äôs features -- I&#x27;ve dropped about half of them üòÅ</p>
            <div class="quoted-thought-image"><a href="https://illya.sh/staticthoughts/data/images/as-a-result-of-the-first-step-in-optimizing-prioritizing-the.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/as-a-result-of-the-first-step-in-optimizing-prioritizing-the.jpg" alt="As a result of the first step in optimizing/prioritizing the random forest‚Äôs features -- I&#x27;ve dropped about half of them üòÅ" class="quoted-thought-img"></a></div>
        </div>
    </div>
</div> 
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/out-of-sample-permutation-feature-importance-for-random" target="_blank" rel="noopener" aria-label="Open Illya's thread: Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization">üßµ Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=the-random-forests-features-have-been-heavily-refactored-i" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/the-random-forests-features-have-been-heavily-refactored-i" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../as-a-result-of-the-first-step-in-optimizing-prioritizing-the" class="thought-permalink">2026-02-20 15:26</a></p>
    </div>
    <div class="thought-content">
        <p>As a result of the first step in optimizing/prioritizing the random forest‚Äôs features -- I&#x27;ve dropped about half of them üòÅ</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/as-a-result-of-the-first-step-in-optimizing-prioritizing-the.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/as-a-result-of-the-first-step-in-optimizing-prioritizing-the.jpg" alt="As a result of the first step in optimizing/prioritizing the random forest‚Äôs features -- I&#x27;ve dropped about half of them üòÅ" class="thought-img"></a>
        </div>
        <div class="quoted-thought-container">
    <div class="quoted-thought-box">
        <div class="quoted-thought-header">
            <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="quoted-thought-user-img">
            <div class="quoted-thought-user-info">
                <span class="quoted-user-name">Illya Gerasymchuk</span>
                <span class="quoted-thought-date-time">
                    <a href="out-of-sample-permutation-feature-importance-for-random" class="quoted-thought-permalink">2026-02-20 15:08</a>
                </span>
            </div>
        </div>
        <div class="quoted-thought-content">
            <p>Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization<br><br>After the first level of tuning of the random forest‚Äôs parameters, it came time to optimize the features on which the random forest gets trained on. I‚Äôve already did a minor cleanup, but I didn‚Äôt yet test for the predictive importance of each feature in the random forest.<br><br>To optimize the random forest‚Äôs features, I‚Äôm using Out of Sample Permutation Feature Importance (OOS). The OOS approach consists in three core steps:<br><br>1Ô∏è‚É£ Train the random forest once on the training data<br>2Ô∏è‚É£ Take out-of-sample validation data (testing data), permute the values of a single feature/values within the same column and pass them to the model trained in step 1.<br>3Ô∏è‚É£ A feature is important for the model if the model‚Äôs predictive power reduces significantly when that feature‚Äôs values are randomly shuffled.<br><br>The ‚Äúout of sample‚Äù part refers to the fact that the set of data used to train the model and evaluate it after permutations is distinct, thus reducing the contribution of noise to the evaluation metrics. By default, scikit-learn uses Gini Importance to rank features by their utility to the model. Gini is a bad metric for my data because of:<br><br>‚ûñ High cardinality bias (it has an inherent bias towards continuous variables, and some of my features are discrete)<br>‚ûñ Gini importance is computed on the training data<br>‚ûñ In case of two correlated features, the random forest will randomly pick one at each split, but Gini will actually divide the importance between the two<br><br>Additionally, the out-of-sample Area Under the ROC Curve (AUC) of 0.7566 is unrealistically good for predicting 5-minute Bitcoin price moves. This value implies that if you pick a random 5-minute winning window and a 5-minute losing one, my model ranks the winner window ‚âà76% of the time. Either I found a model that beats virtually every financial institution in existence, or there is a lookahead bias and overfitting happening in the model. <br><br>Conclusion: my meta forest ‚Äî the ‚Äúseconds_to_settle‚Äù feature is basically carrying the entire model üòÇ So in its current state, the random forest is training almost entirely on the time of day/time to expiration. The cleanup has started.</p>
            <div class="quoted-thought-image"><a href="https://illya.sh/staticthoughts/data/images/out-of-sample-permutation-feature-importance-for-random.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/out-of-sample-permutation-feature-importance-for-random.jpg" alt="Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization" class="quoted-thought-img"></a></div>
        </div>
    </div>
</div> 
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/out-of-sample-permutation-feature-importance-for-random" target="_blank" rel="noopener" aria-label="Open Illya's thread: Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization">üßµ Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=as-a-result-of-the-first-step-in-optimizing-prioritizing-the" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/as-a-result-of-the-first-step-in-optimizing-prioritizing-the" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../out-of-sample-permutation-feature-importance-for-random" class="thought-permalink">2026-02-20 15:08</a></p>
    </div>
    <div class="thought-content">
        <p>Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization<br><br>After the first level of tuning of the random forest‚Äôs parameters, it came time to optimize the features on which the random forest gets trained on. I‚Äôve already did a minor cleanup, but I didn‚Äôt yet test for the predictive importance of each feature in the random forest.<br><br>To optimize the random forest‚Äôs features, I‚Äôm using Out of Sample Permutation Feature Importance (OOS). The OOS approach consists in three core steps:<br><br>1Ô∏è‚É£ Train the random forest once on the training data<br>2Ô∏è‚É£ Take out-of-sample validation data (testing data), permute the values of a single feature/values within the same column and pass them to the model trained in step 1.<br>3Ô∏è‚É£ A feature is important for the model if the model‚Äôs predictive power reduces significantly when that feature‚Äôs values are randomly shuffled.<br><br>The ‚Äúout of sample‚Äù part refers to the fact that the set of data used to train the model and evaluate it after permutations is distinct, thus reducing the contribution of noise to the evaluation metrics. By default, scikit-learn uses Gini Importance to rank features by their utility to the model. Gini is a bad metric for my data because of:<br><br>‚ûñ High cardinality bias (it has an inherent bias towards continuous variables, and some of my features are discrete)<br>‚ûñ Gini importance is computed on the training data<br>‚ûñ In case of two correlated features, the random forest will randomly pick one at each split, but Gini will actually divide the importance between the two<br><br>Additionally, the out-of-sample Area Under the ROC Curve (AUC) of 0.7566 is unrealistically good for predicting 5-minute Bitcoin price moves. This value implies that if you pick a random 5-minute winning window and a 5-minute losing one, my model ranks the winner window ‚âà76% of the time. Either I found a model that beats virtually every financial institution in existence, or there is a lookahead bias and overfitting happening in the model. <br><br>Conclusion: my meta forest ‚Äî the ‚Äúseconds_to_settle‚Äù feature is basically carrying the entire model üòÇ So in its current state, the random forest is training almost entirely on the time of day/time to expiration. The cleanup has started.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/out-of-sample-permutation-feature-importance-for-random.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/out-of-sample-permutation-feature-importance-for-random.jpg" alt="Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/out-of-sample-permutation-feature-importance-for-random" target="_blank" rel="noopener" aria-label="Open Illya's thread: Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization">üßµ Out of Sample Permutation Feature Importance For Random Forest‚Äôs Feature Optimization</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=out-of-sample-permutation-feature-importance-for-random" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/out-of-sample-permutation-feature-importance-for-random" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../the-time-to-optimize-hyperparameters-of-the-random-forest" class="thought-permalink">2026-02-19 16:04</a></p>
    </div>
    <div class="thought-content">
        <p>The time to optimize hyperparameters of the random forest has come<br><br>Starting with a grid search approach</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/the-time-to-optimize-hyperparameters-of-the-random-forest.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/the-time-to-optimize-hyperparameters-of-the-random-forest.jpg" alt="The time to optimize hyperparameters of the random forest has come" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=the-time-to-optimize-hyperparameters-of-the-random-forest" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/the-time-to-optimize-hyperparameters-of-the-random-forest" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../added-a-connection-to-binances-futures-api-and-now-i-have" class="thought-permalink">2026-02-19 13:52</a></p>
    </div>
    <div class="thought-content">
        <p>Added a connection to Binance&#x27;s futures API and now I have the base learners and the random forest looking for profitable 5-minute Bitcoin trades in real time<br><br>Let&#x27;s see how it goes, the model already entered its first trade. Let&#x27;s see how it goes üòÑ</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/added-a-connection-to-binances-futures-api-and-now-i-have.png" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/added-a-connection-to-binances-futures-api-and-now-i-have.png" alt="Added a connection to Binance&#x27;s futures API and now I have the base learners and the random forest looking for profitable 5-minute..." class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=added-a-connection-to-binances-futures-api-and-now-i-have" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/added-a-connection-to-binances-futures-api-and-now-i-have" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../this-a-gross-oversimplification-of-what-it-takes-to" class="thought-permalink">2026-02-19 12:31</a></p>
    </div>
    <div class="thought-content">
        <p>This a gross oversimplification of what it takes to replicate the human brain with AI<br><br>The post is assuming we have a model that can accurately replicate the human brain, which we don&#x27;t.<br><br>200T parameter models won&#x27;t solve that -- you&#x27;ll still have a high model bias.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/this-a-gross-oversimplification-of-what-it-takes-to.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/this-a-gross-oversimplification-of-what-it-takes-to.jpg" alt="This a gross oversimplification of what it takes to replicate the human brain with AI" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=this-a-gross-oversimplification-of-what-it-takes-to" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/this-a-gross-oversimplification-of-what-it-takes-to" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../proxy-model-from-polymarkets-15-minute-bitcoin-price" class="thought-permalink">2026-02-18 16:06</a></p>
    </div>
    <div class="thought-content">
        <p>Proxy Model From Polymarket&#x27;s 15 Minute Bitcoin Price<br><br>I found historical datasets for Polymarket&#x27;s 15 minute up or down Bitcoin price and I think I can use this data to obtain useful signals via a proxy model. I&#x27;ll start with linear regression to build a prediction model, to see if this transfer learning approach works here.<br><br>Yes, it will be overfitting, but for this signal generator it would be by design. The end goal is to find features that improve the random forest&#x27;s split rules, thus further improving the win rate.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/proxy-model-from-polymarkets-15-minute-bitcoin-price.png" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/proxy-model-from-polymarkets-15-minute-bitcoin-price.png" alt="Proxy Model From Polymarket&#x27;s 15 Minute Bitcoin Price" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/proxy-model-from-polymarkets-15-minute-bitcoin-price" target="_blank" rel="noopener" aria-label="Open Illya's thread: Proxy Model From Polymarket&#x27;s 15 Minute Bitcoin Price">üßµ Proxy Model From Polymarket&#x27;s 15 Minute Bitcoin Price</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=proxy-model-from-polymarkets-15-minute-bitcoin-price" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/proxy-model-from-polymarkets-15-minute-bitcoin-price" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../after-tweaking-the-existing-set-of-base-learner-models-the" class="thought-permalink">2026-02-18 14:30</a></p>
    </div>
    <div class="thought-content">
        <p>After tweaking the existing set of base learner models, the random-forest driven trading model factory continues to improve<br><br>The win rate for predicting Bitcoin&#x27;s 5-minute price moves (binary) is now approaching 54%. A win rate of ‚âà56% should suffice to accommodate for transaction costs. Win rates over 60% is where it starts to get interesting.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/after-tweaking-the-existing-set-of-base-learner-models-the.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/after-tweaking-the-existing-set-of-base-learner-models-the.jpg" alt="After tweaking the existing set of base learner models, the random-forest driven trading model factory continues to improve" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=after-tweaking-the-existing-set-of-base-learner-models-the" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/after-tweaking-the-existing-set-of-base-learner-models-the" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../expert-optimization-is-going-well-and-im-starting-to-move" class="thought-permalink">2026-02-17 17:12</a></p>
    </div>
    <div class="thought-content">
        <p>Expert optimization is going well, and I&#x27;m starting to move towards the alpha in 5-minute Bitcoin price markets<br><br>I&#x27;m not claiming that the model that I currently have is meaningful (it&#x27;s NOT!), but it&#x27;s getting closer to interesting win rate ratios (&gt;55%)</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/expert-optimization-is-going-well-and-im-starting-to-move.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/expert-optimization-is-going-well-and-im-starting-to-move.jpg" alt="Expert optimization is going well, and I&#x27;m starting to move towards the alpha in 5-minute Bitcoin price markets" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=expert-optimization-is-going-well-and-im-starting-to-move" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/expert-optimization-is-going-well-and-im-starting-to-move" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../currently-this-is-the-most-valued-expert-in-my-model-factory" class="thought-permalink">2026-02-17 16:33</a></p>
    </div>
    <div class="thought-content">
        <p>Currently, this is the most valued expert in my model factory pipeline<br><br>Not because it does anything useful, but precisely because it does not<br><br>The expert randomly emits positive(buy) or negative(sell) signals. This is a rough baseline for random behaviour. Very useful for the integration testing of the pipeline and identifying noise</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/currently-this-is-the-most-valued-expert-in-my-model-factory.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/currently-this-is-the-most-valued-expert-in-my-model-factory.jpg" alt="Currently, this is the most valued expert in my model factory pipeline" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=currently-this-is-the-most-valued-expert-in-my-model-factory" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/currently-this-is-the-most-valued-expert-in-my-model-factory" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../my-random-forest-looks-much-better-after-the-clean-up" class="thought-permalink">2026-02-17 15:01</a></p>
    </div>
    <div class="thought-content">
        <p>My random forest looks much better after the clean-up<br><br>The feature matrix has been refactored to only include features from which the random forest will be able to learn more effectively. This should greatly reduce the noise<br><br>Now, it&#x27;s time to optimize signals üòÑ</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/my-random-forest-looks-much-better-after-the-clean-up.png" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/my-random-forest-looks-much-better-after-the-clean-up.png" alt="My random forest looks much better after the clean-up" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=my-random-forest-looks-much-better-after-the-clean-up" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/my-random-forest-looks-much-better-after-the-clean-up" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../my-ml-model-factory-produced-this-amazing-model-that-trades" class="thought-permalink">2026-02-17 14:57</a></p>
    </div>
    <div class="thought-content">
        <p>My ML model factory produced this amazing model that trades Bitcoin on 5-minute intervals, cut off at each 5th minute (very similar to Polymarket&#x27;s 5 minute BTC markets) and it made over 200K trades in ‚âà7 months<br><br>Stats:<br>- 200K trades<br>- 6.69% profit<br>- 49% win rate<br><br>So I&#x27;ve pretty much discovered a coin flip ü§£</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/my-ml-model-factory-produced-this-amazing-model-that-trades.png" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/my-ml-model-factory-produced-this-amazing-model-that-trades.png" alt="My ML model factory produced this amazing model that trades Bitcoin on 5-minute intervals, cut off at each 5th minute (very similar to..." class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=my-ml-model-factory-produced-this-amazing-model-that-trades" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/my-ml-model-factory-produced-this-amazing-model-that-trades" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../they-say-that-ai-agents-will-replace-all-white-collar-jobs" class="thought-permalink">2026-02-17 13:35</a></p>
    </div>
    <div class="thought-content">
        <p>They say that AI agents will replace all white collar-jobs in the next 6-12 months üòÑ<br><br>So LLMs only have 5-11 months to learn about car washing.<br><br>This simple prompt breaks ChatGPT, DeepSeek, Qwen and Kimi. Works on Gemini though.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/they-say-that-ai-agents-will-replace-all-white-collar-jobs.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/they-say-that-ai-agents-will-replace-all-white-collar-jobs.jpg" alt="They say that AI agents will replace all white collar-jobs in the next 6-12 months üòÑ" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=they-say-that-ai-agents-will-replace-all-white-collar-jobs" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/they-say-that-ai-agents-will-replace-all-white-collar-jobs" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../the-random-forest-that-guides-my-model-factory-needs" class="thought-permalink">2026-02-16 15:03</a></p>
    </div>
    <div class="thought-content">
        <p>The random forest that guides my model factory needs refactoring<br><br>While the current architecture shows good prospects for generating profitable trading models, the random forest is currently a bit of a mess üòÖ If you look at the image attached to the post, you can see why.<br> <br>Since the random forest can‚Äôt extrapolate, features like the date and source segment will just make the forest learn on noise (it will train on association between those features, e.g. it‚Äôs not very useful to learn that volume in 2025 was higher than in 2024). But this was expected. The goal was to validate an architectural approach that could work. Now it‚Äôs time for optimizations and changes. Actually, changes before optimizations.<br><br>Another thing that I‚Äôll get rid of is the hybrid spine for supporting data from multiple timeframes, as the model didn‚Äôt extract any meaningful alpha ‚Äî and some of it has even confused the random forest. I‚Äôm sure there is way to make even with limited data, but I‚Äôll be moving to testing it on dataset for which I have access to highly granular data (hello, Bitcoin!). So the logic of the data loader in the pipeline will be greatly simplified.<br><br>I‚Äôll also make the labeler configurable, so that you can use the same set of features for different types of predictions. For example, you could have the ‚Äúunconstrained‚Äù standard deviation labelling in the sense hat you can enter and exit the position at any time, to constrained logic scenarios such as the ones of Polymarket‚Äôs 5-minute price predictions on Bitcoin, where you can only enter a position at specific times, and the resolution happens at specific times (e.g. at the end of every 5th minute of the day, starting from 0).<br><br>The core logic of the ML pipeline remans the same.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/the-random-forest-that-guides-my-model-factory-needs.png" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/the-random-forest-that-guides-my-model-factory-needs.png" alt="The random forest that guides my model factory needs refactoring" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/the-random-forest-that-guides-my-model-factory-needs" target="_blank" rel="noopener" aria-label="Open Illya's thread: The random forest that guides my model factory needs refactoring">üßµ The random forest that guides my model factory needs refactoring</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=the-random-forest-that-guides-my-model-factory-needs" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/the-random-forest-that-guides-my-model-factory-needs" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../one-idea-for-vibe-coding-profitable-trading-strategies-is-to" class="thought-permalink">2026-02-13 14:55</a></p>
    </div>
    <div class="thought-content">
        <p>One idea for vibe-coding profitable trading strategies is to strictly define a pipeline of your ML strategy factory, and restrict your AI agent to only write code within your tightly-defined framework.<br><br>I&#x27;m currently exploring this. To add a new signal, the agent will need to extend this contract.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/one-idea-for-vibe-coding-profitable-trading-strategies-is-to.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/one-idea-for-vibe-coding-profitable-trading-strategies-is-to.jpg" alt="One idea for vibe-coding profitable trading strategies is to strictly define a pipeline of your ML strategy factory, and restrict your..." class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=one-idea-for-vibe-coding-profitable-trading-strategies-is-to" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/one-idea-for-vibe-coding-profitable-trading-strategies-is-to" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../overfitting-in-machine-learning-models-visualized" class="thought-permalink">2026-02-13 13:44</a></p>
    </div>
    <div class="thought-content">
        <p>Overfitting In Machine Learning Models Visualized<br><br>I came across the visualization of 3 functions which demonstrate how a model can become overfit to noise.<br><br>So we are trying to estimate the function whose graph visualization is shown in figure A. In A you see the true underlying function representation. Figures B and C are estimates for the true function shown in Figure A. In Figures B and C, a thin-plate spline fit is used to approximate the function shown in A. To obtain the function/model in Figure C, a smaller level of smoothness was used than in Figure B (less smoothing means more flexibility/effective degrees of freedom).<br><br>Figure B approximates the function pretty well, while Figure C fits the training data *perfectly*, with ZERO errors on the training data (in figure C you can see that all of the red points are on the yellow surface). However, you notice that the surface in figure C is a lot more variable/wiggly than in figure A - this is because in the process of constructing the function model in Figure C - we overfit on the noise in the training set!<br><br>So by overfitting you are making your model extremely sensitive/adapted to the training data, and the model ends up learning from the noise instead of actual signals. Regarding a machine-learning approach to trading/finance - this is how you get &gt;90% success rate while backtesting your model, but around random performance with novel real-world price data.<br><br>You have to remember than beyond trivial use-cases, your models are never going to be perfect ‚Äî and if they are, you are probably overfitting. You have to remember that any ML model that you construct *NEVER* perfect, due to the presence of irreducible errors, bias and variance.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/overfitting-in-machine-learning-models-visualized.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/overfitting-in-machine-learning-models-visualized.jpg" alt="Overfitting In Machine Learning Models Visualized" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/overfitting-in-machine-learning-models-visualized" target="_blank" rel="noopener" aria-label="Open Illya's thread: Overfitting In Machine Learning Models Visualized">üßµ Overfitting In Machine Learning Models Visualized</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=overfitting-in-machine-learning-models-visualized" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/overfitting-in-machine-learning-models-visualized" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../okay-i-found-another-source-of-overfitting-data-leakage-in" class="thought-permalink">2026-02-11 18:32</a></p>
    </div>
    <div class="thought-content">
        <p>Okay I found another source of overfitting/data leakage in my trading ML factory üòÅ<br><br>The triple barrier label is computed at *position close time*, which is determined by which deviation from price returns hits first (upper bound, lower bound or timeout). The training set was including everything until a specific date, *BUT* many positions before that date close in the future - after the training cutoff date. I only got a few confirmed leaks from my run - but still overfitting.<br><br>These series of posts I‚Äôve been making, provide you with a small practical glance into why mere backtest performance is not an indication of absolutely NOTHING. This is also what essentially goes into constructing an automated, machine-learning driven trading strategy (or rather a factory for those!). It‚Äôs very easy to overfit.<br><br>There are many large-following accounts on X/Twitter that post about the strategies that they discovered, with impressive performance on historical data. Usually those same accounts have ulterior motives, such as selling courses or access to trading signal groups. Be aware that their backtest results are NOT an indication that their strategy will work in a real-world scenario. As a general rule, if those pay-to-access strategies really performed that well with novel price data - the individuals running those strategies would be much better off operating on a fee-basis (i.e. they charge a percentage of returns on your capital, rather than a fixed fee.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/okay-i-found-another-source-of-overfitting-data-leakage-in.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/okay-i-found-another-source-of-overfitting-data-leakage-in.jpg" alt="Okay I found another source of overfitting/data leakage in my trading ML factory üòÅ" class="thought-img"></a>
        </div>
        <div class="quoted-thought-container">
    <div class="quoted-thought-box">
        <div class="quoted-thought-header">
            <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="quoted-thought-user-img">
            <div class="quoted-thought-user-info">
                <span class="quoted-user-name">Illya Gerasymchuk</span>
                <span class="quoted-thought-date-time">
                    <a href="my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily" class="quoted-thought-permalink">2026-02-11 17:46</a>
                </span>
            </div>
        </div>
        <div class="quoted-thought-content">
            <p>My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time period (‚âà12%)<br><br>This was after running in on price data of gold futures most recent drawdown from ‚âà$5600. The model yielded its largest returns by longing the pullbacks during the correction and closing the positions at the right time (the exit logic is based on deviations from price returns). This is very interesting, as it could be an indication of model&#x27;s utility during drawdowns. Its largest loss was also during the same event frame, but I believe that can be greatly optimized with model parameters and thresholds (which I haven‚Äôt optimized at all yet).<br><br>The entry/exit times are imprecise, because the strategy is based on volume dollar bars sampling, which I&#x27;m extracting/approximating from OCHLV data from TradingView.<br><br>Entry/exit decisions are driven by a random forest, which learns from the signals of various &quot;experts‚Äù, and a tripple-barrier outcome of those signals. In practice, the experts are just Python functions which perform statistical analysis on the dollar volume feature matrix containing combined price history from various timeframes, and output a buy(1), sell(-1) or do nothing(0) signal. Then, the buy and sell signals from experts are passed to a random forest in a matrix, which then ‚Äúlearns‚Äù which combination of expert calls yields the most correct returns. The experts only produce position entry signals, each position is then closed based on standard deviation of price returns (intuitively: the position is closed when the price exhibits an ‚Äúunusual‚Äù perceptual move, either up or down).<br><br>This trading ML factory was designed to work under significant constraints of historical price data. I limited it to the one available for export in TradingView. For example, 1 hour candle data only goes back a little over 2 years. In principle, there is little alpha to be extracted from here, but I was able to mitigate it by following a ‚Äúhybrid spine‚Äù approach, where multiple timeframes are combined statistically and made available in the matrix passed to the random forest. More granular OCHLV data is scarce (e.g. the 1 minute OCHLV data that I have available for gold futures, goes back less than a month, and there are some continuity gaps in it), however it is still useful to provide some micromarket structure int terms of volume that the random forest can rely on. As such, the factory performs best on higher timeframes (4h and above).<br><br>The ML factory learns and predicts based on the prices of multiple assets (and the ratios between them). At the moment, it computes our to gold, silver and copper futures OCHLV data. But it‚Äôs designed to be dynamically extendable by adding CSVs with new asset price data.<br><br>Currently, I‚Äôm very much at the prototyping/exploratory phase with this project, so I don‚Äôt have the code publicly available yet. If you want access to the code, just reach out to me. I‚Äôm not claiming in any way that it will consistently yield &gt;20% returns, and I understand that the trade count, trading data set granularity and backtesting timeframe are not sufficient for a strong statistical confidence in evaluating the quality of the model factory, but I am claiming that it provides a starting point for directing the factory‚Äôs approach. Also, trading costs, slippage, position sizing are not accounted for. Even with limited historical data, I believe that a careful selection of experts can yield profitable automated strategies.</p>
            <div class="quoted-thought-image"><a href="https://illya.sh/staticthoughts/data/images/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily.jpg" alt="My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time..." class="quoted-thought-img"></a></div>
        </div>
    </div>
</div> 
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily" target="_blank" rel="noopener" aria-label="Open Illya's thread: My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time period (‚âà12%)">üßµ My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time period (‚âà12%)</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=okay-i-found-another-source-of-overfitting-data-leakage-in" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/okay-i-found-another-source-of-overfitting-data-leakage-in" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily" class="thought-permalink">2026-02-11 17:46</a></p>
    </div>
    <div class="thought-content">
        <p>My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time period (‚âà12%)<br><br>This was after running in on price data of gold futures most recent drawdown from ‚âà$5600. The model yielded its largest returns by longing the pullbacks during the correction and closing the positions at the right time (the exit logic is based on deviations from price returns). This is very interesting, as it could be an indication of model&#x27;s utility during drawdowns. Its largest loss was also during the same event frame, but I believe that can be greatly optimized with model parameters and thresholds (which I haven‚Äôt optimized at all yet).<br><br>The entry/exit times are imprecise, because the strategy is based on volume dollar bars sampling, which I&#x27;m extracting/approximating from OCHLV data from TradingView.<br><br>Entry/exit decisions are driven by a random forest, which learns from the signals of various &quot;experts‚Äù, and a tripple-barrier outcome of those signals. In practice, the experts are just Python functions which perform statistical analysis on the dollar volume feature matrix containing combined price history from various timeframes, and output a buy(1), sell(-1) or do nothing(0) signal. Then, the buy and sell signals from experts are passed to a random forest in a matrix, which then ‚Äúlearns‚Äù which combination of expert calls yields the most correct returns. The experts only produce position entry signals, each position is then closed based on standard deviation of price returns (intuitively: the position is closed when the price exhibits an ‚Äúunusual‚Äù perceptual move, either up or down).<br><br>This trading ML factory was designed to work under significant constraints of historical price data. I limited it to the one available for export in TradingView. For example, 1 hour candle data only goes back a little over 2 years. In principle, there is little alpha to be extracted from here, but I was able to mitigate it by following a ‚Äúhybrid spine‚Äù approach, where multiple timeframes are combined statistically and made available in the matrix passed to the random forest. More granular OCHLV data is scarce (e.g. the 1 minute OCHLV data that I have available for gold futures, goes back less than a month, and there are some continuity gaps in it), however it is still useful to provide some micromarket structure int terms of volume that the random forest can rely on. As such, the factory performs best on higher timeframes (4h and above).<br><br>The ML factory learns and predicts based on the prices of multiple assets (and the ratios between them). At the moment, it computes our to gold, silver and copper futures OCHLV data. But it‚Äôs designed to be dynamically extendable by adding CSVs with new asset price data.<br><br>Currently, I‚Äôm very much at the prototyping/exploratory phase with this project, so I don‚Äôt have the code publicly available yet. If you want access to the code, just reach out to me. I‚Äôm not claiming in any way that it will consistently yield &gt;20% returns, and I understand that the trade count, trading data set granularity and backtesting timeframe are not sufficient for a strong statistical confidence in evaluating the quality of the model factory, but I am claiming that it provides a starting point for directing the factory‚Äôs approach. Also, trading costs, slippage, position sizing are not accounted for. Even with limited historical data, I believe that a careful selection of experts can yield profitable automated strategies.</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily.jpg" alt="My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time..." class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily" target="_blank" rel="noopener" aria-label="Open Illya's thread: My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time period (‚âà12%)">üßµ My trading ML factory yielded ‚âà22% return on gold on a daily timeframe, which is almost a double of gold&#x27;s return in the same time period (‚âà12%)</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/my-trading-ml-factory-yielded-22-return-on-gold-on-a-daily" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../so-i-solved-the-overfitting-issue-and-as-i-suspected" class="thought-permalink">2026-02-11 15:34</a></p>
    </div>
    <div class="thought-content">
        <p>So I solved the overfitting issue, and as I suspected backtest data was leaking into the training set<br><br>In 13 trading days it yields ‚âà12% with gold on an hourly timeframe target. For silver it goes up to ‚âà30% (expectedly)<br><br>I&#x27;m going to add 15m, 5m and 1m data to see how it performs during the drawdown</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/so-i-solved-the-overfitting-issue-and-as-i-suspected.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/so-i-solved-the-overfitting-issue-and-as-i-suspected.jpg" alt="So I solved the overfitting issue, and as I suspected backtest data was leaking into the training set" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=so-i-solved-the-overfitting-issue-and-as-i-suspected" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/so-i-solved-the-overfitting-issue-and-as-i-suspected" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../my-random-forest-guided-meta-model-factory-discovered-a" class="thought-permalink">2026-02-10 19:04</a></p>
    </div>
    <div class="thought-content">
        <p>My random-forest guided meta model factory discovered a trading strategy which profits 87773.98% in the past 7 years<br><br>There is definitely no overfitting here üòÇ</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/my-random-forest-guided-meta-model-factory-discovered-a.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/my-random-forest-guided-meta-model-factory-discovered-a.jpg" alt="My random-forest guided meta model factory discovered a trading strategy which profits 87773.98% in the past 7 years" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=my-random-forest-guided-meta-model-factory-discovered-a" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/my-random-forest-guided-meta-model-factory-discovered-a" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../dont-be-fooled-by-backtest-performance" class="thought-permalink">2026-02-07 19:12</a></p>
    </div>
    <div class="thought-content">
        <p>Don&#x27;t Be Fooled By Backtest Performance<br><br>I&#x27;ve been coming accross of posts on X from accounts showcasing 70%+ returns when backtesting their vibe-coded trading strategies. Don&#x27;t be misguidaded by those numbers and claims.<br><br>Most likely it performs well on historical data, but is random at best with new data.Agents are not that good at developing profitable trading strategies, as they tend to stick &#x27;default&#x27; statistical measures like RSI and hope for the best üòÑ If it was that easy - everyone would do it, thus erasing any alpha<br><br>These vibe-coded models most likely overfitting</p>
        <div class="thought-image">
            
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/dont-be-fooled-by-backtest-performance" target="_blank" rel="noopener" aria-label="Open Illya's thread: Don&#x27;t Be Fooled By Backtest Performance">üßµ Don&#x27;t Be Fooled By Backtest Performance</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=dont-be-fooled-by-backtest-performance" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/dont-be-fooled-by-backtest-performance" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../no-agi-with-llms-in-their-current-form" class="thought-permalink">2026-02-05 17:07</a></p>
    </div>
    <div class="thought-content">
        <p>No AGI With LLMs In Their Current Form.<br><br>Generative models are just one type of models in ML. Neither self-driving cars, nor inference about financial data primarily rely on generative models. Perhaps you can have LLM program that logic on the go, but that would require the LLM to effectively dominate those tasks (i.e. effectively become good at driving a car and being able to build sound financial models via a programming language), and given the probabilistic nature of the inference I don‚Äôt think we can have LLMs and agents fully taking over these critical areas. Regarding the probabilistic nature, I‚Äôm specifically referring the unsecured/unparameterized probability - it‚Äôs hard to modulate the potential error.<br><br>Right now, agent setups are very good at boilerplate, repeatable code - and most of the code is like that. Most of software development is already abstracted by various frameworks, and a lot of the softwares do very similar tasks and are implemented in similar ways, following specific patterns. Anecdotally, think of a generic SaaS - there are several competing products that do basically the same thing, because they solve a common problem. Agents/LLMs are already great at predicting code of which they have a lot of examples in their training set. This alone, is a massive productivity boost, especially if you are prototyping/iterating.<br><br>To give a more concrete answer, the current tech would probably top out at multi-agent, multi-model and some form of DSL(s). So you would have multiple agents, some of them using distinct models. For example, one model for planning, another model for writing code, another model for debugging, etc. The DSLs would be used for both: customizing agents and models (input) and the model would output the code in a DSL (output). So when you ask the model to generate code, it would output it in a higher-level programming language/DSL, and then that one would either be compiled down/translated into a different target, wether that is machine code or a programming language like Python. The DSL design would be optimized for this ‚Äúgenerative development‚Äù - in practice it will make things like math-induced security issues more difficult for LLMs to make (e.g. the DSL forces the LLM to use pre-defined cryptographic primitives, and at compilation time type metadata is associated to enforce its correct usage across schemes). So at this tech‚Äôs peak, the LLMs probably won‚Äôt be outputting their code in directly Python. I don‚Äôt mean that this is the peak for generative models or ML field as a whole, but for the current state of the tech and the approaches it uses.<br><br>Before the tech tops out, however, I think there will be a security issue at scale, followed by an increased focus on security of agents and the the inferred code. Since many products will be using the same models to generate code, the same flawed security patterns will arise in many places, and it will be ‚Äúeasy‚Äù to exploit them at scale. Even with detailed instructions, SOTA models still generate vulnerabilities. Even though most of the code is fine, it takes one small issue in a sensitive place to compromise the system - and if you write any non-trivial code with LLMs, you will run into them. I‚Äôve encountered a lot of this issues myself, and in the code that I‚Äôve reviewed from other developers who wrote their code with LLMs. Proper context helps a lot, but it doesn‚Äôt resolve the probabilistic nature of the output.<br><br>Regarding getting closer to human-like functionality, it will almost certainly require other ML schemes/approaches in addition to what we have now and further refining and combination of existing approaches. I think we will soon go into meta-models, where a model internally uses other models/sub models to produce the output (in its simplest form, think of a random forest that ‚Äúchoses‚Äù the most appropriate sub-model to run or the output which one of the sub-model‚Äôs outputs to use for the next step) - this can help mitigate some of the risks arising from the probabilistic nature of the inference. That would require coordinated, specialized agents, powered by meta-models.<br><br>Where I think we have a lot to still to gain with the current tech, even if its progress freezes, is education. LLMs provide a novel way to interact with digital information, you can do it in the same way that you would interact with another human - via spoken language. Being able to formulate your very specific questions, in your very specific way and usually getting a correct answer to it still amazes me to this day. If you combine generative models with VR, you get a whole new dimension of experiencing information, allowing to learn more effectively.</p>
        <div class="thought-image">
            
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/no-agi-with-llms-in-their-current-form" target="_blank" rel="noopener" aria-label="Open Illya's thread: No AGI With LLMs In Their Current Form.">üßµ No AGI With LLMs In Their Current Form.</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=no-agi-with-llms-in-their-current-form" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/no-agi-with-llms-in-their-current-form" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../ai-will-follow-a-much-more-logarithmic-growth-than-the-hype" class="thought-permalink">2026-02-03 12:58</a></p>
    </div>
    <div class="thought-content">
        <p>AI will follow a much more logarithmic growth than the hype may lead you to believe<br><br>We&#x27;ve been perpetually &#x27;6 months away from AGI&#x27;, yet as amazing the SOTA generative models are - we&#x27;re no where near that.<br><br>I don&#x27;t believe that the current generative ML architectures will be enough to deliver the promises even over the next decade. Generative models have their limits.<br><br>There&#x27;s also a massive AI bubble in the U.S., wit the same entities over promising on results directly benefiting from public funds, which get counted as revenue many times over. Maybe this need a new term like, rerevenuezation (like rehypothecation with bonds) üòÑ<br><br>With that said, I don&#x27;t think we&#x27;re anywhere near the full benefits just from the tech we have available up to today. Agentic systems in particular.</p>
        <div class="thought-image">
            
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"><a class="thread-chip primary" href="https://illya.sh/threads/ai-will-follow-a-much-more-logarithmic-growth-than-the-hype" target="_blank" rel="noopener" aria-label="Open Illya's thread: AI will follow a much more logarithmic growth than the hype may lead you to believe">üßµ AI will follow a much more logarithmic growth than the hype may lead you to believe</a></div>
            <div class="action-buttons">
                <a href="comment.html?id=ai-will-follow-a-much-more-logarithmic-growth-than-the-hype" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/ai-will-follow-a-much-more-logarithmic-growth-than-the-hype" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="https://illya.sh/staticthoughts/data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="../random-forest-is-currently-my-favorite-term-from-financial" class="thought-permalink">2026-01-24 16:47</a></p>
    </div>
    <div class="thought-content">
        <p>&quot;Random forest&quot; is currently my favorite term from financial ML<br><br>... TREES MAKE FINANCIAL DECISIONS NOW?? üå≥üòÑ</p>
        <div class="thought-image">
            <a href="https://illya.sh/staticthoughts/data/images/random-forest-is-currently-my-favorite-term-from-financial.jpg" class="lightbox-trigger"><img loading="lazy" src="https://illya.sh/staticthoughts/data/images/random-forest-is-currently-my-favorite-term-from-financial.jpg" alt="&quot;Random forest&quot; is currently my favorite term from financial ML" class="thought-img"></a>
        </div>
        
    </div>
    <!-- Action Bar -->
    <div class="thought-actions">
        <div class="action-separator"></div>
        <div class="action-row">
            <div class="thread-links" aria-label="Related threads"></div>
            <div class="action-buttons">
                <a href="comment.html?id=random-forest-is-currently-my-favorite-term-from-financial" class="comment-button" aria-label="Comment on this thought">üí¨</a>
                <button class="share-button" data-share-url="https://illya.sh/thoughts/random-forest-is-currently-my-favorite-term-from-financial" data-share-title="" data-share-text="" aria-label="Share this thought">üì§</button>
            </div>
        </div>
    </div>
</div>

        
        <nav class="pagination"><span class="newer disabled">‚Üê Newer</span><span class="page-info">Page 1 of 2</span><a href="1.html" class="older">Older ‚Üí</a></nav>
    </div>

    <!-- Lightbox Structure (Initially Hidden) -->
    <div id="lightbox" class="lightbox-overlay">
        <div class="lightbox-content">
            <button class="lightbox-close" aria-label="Close">&times;</button>
            <img src="" alt="Lightbox image">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = lightbox.querySelector('img');
            const lightboxClose = lightbox.querySelector('.lightbox-close');
            const triggers = document.querySelectorAll('.lightbox-trigger');

            triggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default link behavior
                    const imgSrc = trigger.getAttribute('href');
                    lightboxImg.setAttribute('src', imgSrc);
                    lightbox.classList.add('visible');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling background
                });
            });

            // Check if we're on an individual thought page (robust across URL modes)
            const isIndividualThoughtPage = !!document.querySelector('.individual-thought-navigation');
            
            // Handle quoted thought box clicks for navigation (always clickable)
            const quotedThoughts = document.querySelectorAll('.quoted-thought-box');
            quotedThoughts.forEach(quotedBox => {
                quotedBox.addEventListener('click', (e) => {
                    // Don't navigate if clicking on an image or link within the quoted thought
                    if (e.target.tagName === 'IMG' || e.target.tagName === 'A') {
                        return;
                    }
                    e.preventDefault();
                    // Find the permalink within this quoted thought
                    const permalink = quotedBox.querySelector('.quoted-thought-permalink');
                    if (permalink) {
                        window.location.href = permalink.getAttribute('href');
                    }
                });
                
                // Add cursor pointer to indicate clickability
                quotedBox.style.cursor = 'pointer';
            });

            // Handle main thought box clicks (only in timeline/list views, not on individual pages)
            if (!isIndividualThoughtPage) {
                const mainThoughts = document.querySelectorAll('.thought-box');
                mainThoughts.forEach(thoughtBox => {
                    // Skip if this is a quoted thought box (already handled above)
                    if (thoughtBox.closest('.quoted-thought-container')) {
                        return;
                    }
                    
                    thoughtBox.addEventListener('click', (e) => {
                        // Don't navigate if clicking on an image, link, quoted thought, or action buttons within the main thought
                        if (e.target.tagName === 'IMG' || 
                            e.target.tagName === 'A' || 
                            e.target.closest('.quoted-thought-container') ||
                            e.target.closest('.thought-actions')) {
                            return;
                        }
                        e.preventDefault();
                        // Find the permalink within this main thought
                        const permalink = thoughtBox.querySelector('.thought-permalink');
                        if (permalink) {
                            window.location.href = permalink.getAttribute('href');
                        }
                    });
                    
                    // Add cursor pointer and clickable class to indicate clickability
                    thoughtBox.style.cursor = 'pointer';
                    thoughtBox.classList.add('clickable');
                });
            }

            // --- Share button logic with single vs double-click ---
            const shareButtons = document.querySelectorAll('.share-button');
            const DOUBLE_THRESHOLD = 500; // ms

            shareButtons.forEach(btn => {
                let clickTimer = null;
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();

                    const shareData = {
                        title: btn.dataset.shareTitle,
                        text: btn.dataset.shareText,
                        url: btn.dataset.shareUrl
                    };

                    // If this is the second click within threshold ‚Üí double-click
                    if (clickTimer) {
                        clearTimeout(clickTimer);
                        clickTimer = null;
                        performCopy(shareData.url); // Double-click action
                        return;
                    }

                    // First click ‚Äì set up timer for single-click action
                    clickTimer = setTimeout(() => {
                        clickTimer = null;
                        showNativeShare(shareData);
                    }, DOUBLE_THRESHOLD);
                });
            });

            async function showNativeShare(shareData) {
                if (navigator.share) {
                    try {
                        await navigator.share(shareData);
                        return;
                    } catch (err) {
                        // Ignore user cancellation; fallback otherwise
                        if (!err || (err.name !== 'AbortError' && err.name !== 'NotAllowedError')) {
                            performCopy(shareData.url);
                        }
                        return;
                    }
                }
                performCopy(shareData.url); // Fallback when Web Share not available
            }

            function performCopy(url) {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(url).then(() => {
                        toast('Link copied to clipboard! üìã');
                    }).catch(() => {
                        toast('Copy this link: ' + url);
                    });
                } else {
                    toast('Copy this link: ' + url);
                }
            }

            // Simple toast helper
            function toast(msg) {
                const old = document.querySelector('.share-feedback');
                if (old) old.remove();
                const el = document.createElement('div');
                el.className = 'share-feedback';
                el.textContent = msg;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 3000);
            }

            function closeLightbox() {
                lightbox.classList.remove('visible');
                lightboxImg.setAttribute('src', ''); // Clear image src
                document.body.style.overflow = ''; // Restore scrolling
            }

            // Close on button click
            lightboxClose.addEventListener('click', closeLightbox);

            // Close on clicking overlay background
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) { // Only close if overlay itself is clicked
                    closeLightbox();
                }
            });

            // Close on Escape key press
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && lightbox.classList.contains('visible')) {
                    closeLightbox();
                }
            });
        });
    </script>

    <script>
        // Dark Mode Toggle Logic
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const profileImg = document.querySelector('.profile-img');
            const feedbackElement = document.getElementById('theme-feedback');
            const themeLocalStorageKey = 'themePreference'; // Stores 'auto', 'light', or 'dark'
            let feedbackTimeout;

            function applyTheme(theme) {
                // Remove specific mode classes first
                body.classList.remove('light-mode', 'dark-mode');
                let actualTheme = theme;

                if (theme === 'auto') {
                    // Check system preference if auto
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    actualTheme = prefersDark ? 'dark' : 'light';
                } 

                // Apply the determined theme class
                if (actualTheme === 'dark') {
                    body.classList.add('dark-mode');
                } else {
                    body.classList.add('light-mode'); 
                }
            }

            function showFeedback(message) {
                if (!feedbackElement) return;
                
                // Clear any existing timeout to prevent overlap
                if (feedbackTimeout) {
                    clearTimeout(feedbackTimeout);
                }

                feedbackElement.innerHTML = message;
                feedbackElement.classList.add('visible');

                // Hide feedback after a delay
                feedbackTimeout = setTimeout(() => {
                    feedbackElement.classList.remove('visible');
                }, 1700); // 1.7 seconds
            }

            function setThemePreference(theme) {
                localStorage.setItem(themeLocalStorageKey, theme);
                applyTheme(theme);
                // Show feedback based on the *newly set* preference
                let feedbackMessage = '';
                if (theme === 'light') {
                    feedbackMessage = 'üí° Light Mode Activated';
                } else if (theme === 'dark') {
                    feedbackMessage = 'üåô Dark Mode Activated';
                } else {
                    feedbackMessage = '‚öôÔ∏è Auto Mode Activated';
                }
                 showFeedback(feedbackMessage);
            }

            function cycleTheme() {
                const currentPreference = localStorage.getItem(themeLocalStorageKey) || 'auto'; // Default to auto
                let nextPreference;

                if (currentPreference === 'auto') {
                    nextPreference = 'light';
                } else if (currentPreference === 'light') {
                    nextPreference = 'dark';
                } else { // currentPreference === 'dark'
                    nextPreference = 'auto';
                }
                setThemePreference(nextPreference);
            }

            // Set initial theme
            const savedTheme = localStorage.getItem(themeLocalStorageKey) || 'auto'; // Default to auto
            applyTheme(savedTheme);

            // Add click listener to profile image
            if (profileImg) {
                profileImg.addEventListener('click', cycleTheme);
            }

             // Listen for system theme changes
             window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                 // Only apply change if the current preference is 'auto'
                 if (localStorage.getItem(themeLocalStorageKey) === 'auto' || !localStorage.getItem(themeLocalStorageKey)) {
                     applyTheme('auto'); // Re-apply auto theme to respect the change
                 }
             });
        });
    </script>

</body>
</html>
