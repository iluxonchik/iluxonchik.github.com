<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Basic SEO / Title -->
    <title>Illya&#x27;s Thoughts - Page 5</title> 
    
    <!-- Open Graph / Social Media Tags -->
    <meta property="og:title" content="Illya's Thoughts - Page 5" />
    <meta property="og:type" content='website' />
    <meta property="og:url" content='https://illya.sh/thoughts/9.html' />
    <meta property="og:image" content='https://illya.sh/thoughts/data/illya_gerasymchuk_thoughts.webp' />
    <meta property="og:description" content="Crypto, Finance, Blockchain, AI, DeFi, Web3 and Zero-Knowledge. Pursuing master's in Law & Financial Markets." />
    <meta property="og:site_name" content="Illya's Thoughts" />
    <meta name="twitter:card" content='summary_large_image' />
    <meta name="twitter:title" content="Illya's Thoughts - Page 5" />
    <meta name="twitter:description" content="Crypto, Finance, Blockchain, AI, DeFi, Web3 and Zero-Knowledge. Pursuing master's in Law & Financial Markets." />
    <meta name="twitter:image" content='https://illya.sh/thoughts/data/illya_gerasymchuk_thoughts.webp' />
    
    <style>
        :root {
            /* Light Theme Variables */
            --bg-color: #f4f4f4;
            --container-bg: #ffffff;
            --box-bg: #fff;
            --text-color: #333;
            --secondary-text-color: #555;
            --light-text-color: #666;
            --link-color: #007bff;
            --link-hover-color: #0056b3;
            --border-color: #ddd;
            --soft-border-color: #eee;
            --dashed-border-color: #aaa;
            --box-shadow-color: rgba(0,0,0,0.08);
            --lightbox-bg: rgba(0, 0, 0, 0.9);
            --lightbox-close-bg: rgba(255, 255, 255, 0.8);
            --lightbox-close-hover-bg: rgba(255, 255, 255, 1);
            --lightbox-close-color: #000;
            --disabled-text-color: #aaa;
            --disabled-bg-color: #f9f9f9;
            --hover-bg-color: #eee;
        }

        /* Dark Theme Variables (applied via media query or body class) */
        .dark-mode {
            --bg-color: #1a1a1a; /* Dark grey background */
            --container-bg: #2b2b2b; /* Slightly lighter container */
            --box-bg: #2b2b2b; /* Same as container for profile/thought boxes */
            --text-color: #e0e0e0; /* Light grey text */
            --secondary-text-color: #b0b0b0; /* Medium grey */
            --light-text-color: #999; /* Lighter grey for dates etc. */
            --link-color: #58a6ff; /* Lighter blue for links */
            --link-hover-color: #80bfff; /* Even lighter blue on hover */
            --border-color: #444; /* Darker border */
            --soft-border-color: #333; /* Even darker soft border */
            --dashed-border-color: #666; /* Darker dashed border */
            --box-shadow-color: rgba(255,255,255,0.08); /* Light shadow */
            --lightbox-bg: rgba(0, 0, 0, 0.95); /* Slightly more opaque */
            --lightbox-close-bg: rgba(50, 50, 50, 0.8);
            --lightbox-close-hover-bg: rgba(70, 70, 70, 1);
            --lightbox-close-color: #eee;
            --disabled-text-color: #777;
            --disabled-bg-color: #3a3a3a;
            --hover-bg-color: #383838;
        }

        /* Apply dark mode based on system preference */
        @media (prefers-color-scheme: dark) {
            :root {
                /* Default to dark variables if system preference is dark */
                /* This will be overridden if .light-mode is explicitly set */
                --bg-color: #1a1a1a;
                --container-bg: #2b2b2b;
                --box-bg: #2b2b2b;
                --text-color: #e0e0e0;
                --secondary-text-color: #b0b0b0;
                --light-text-color: #999;
                --link-color: #58a6ff;
                --link-hover-color: #80bfff;
                --border-color: #444;
                --soft-border-color: #333;
                --dashed-border-color: #666;
                --box-shadow-color: rgba(255,255,255,0.08);
                --lightbox-bg: rgba(0, 0, 0, 0.95);
                --lightbox-close-bg: rgba(50, 50, 50, 0.8);
                --lightbox-close-hover-bg: rgba(70, 70, 70, 1);
                --lightbox-close-color: #eee;
                --disabled-text-color: #777;
                --disabled-bg-color: #3a3a3a;
                --hover-bg-color: #383838;
            }
            /* Ensure explicit light mode overrides system pref */
            .light-mode {
                --bg-color: #f4f4f4;
                --container-bg: #ffffff;
                --box-bg: #fff;
                --text-color: #333;
                --secondary-text-color: #555;
                --light-text-color: #666;
                --link-color: #007bff;
                --link-hover-color: #0056b3;
                --border-color: #ddd;
                --soft-border-color: #eee;
                --dashed-border-color: #aaa;
                --box-shadow-color: rgba(0,0,0,0.08);
                --lightbox-bg: rgba(0, 0, 0, 0.9);
                --lightbox-close-bg: rgba(255, 255, 255, 0.8);
                --lightbox-close-hover-bg: rgba(255, 255, 255, 1);
                --lightbox-close-color: #000;
                --disabled-text-color: #aaa;
                --disabled-bg-color: #f9f9f9;
                --hover-bg-color: #eee;
            }
        }

        body {
            font-family: "Courier New", Courier, monospace;
            background-color: var(--bg-color); /* USE VAR */
            color: var(--text-color); /* USE VAR - Set default text color */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition */
        }

        a {
            color: var(--link-color);
            text-decoration: none; /* Consistent link styling */
            transition: color 0.2s ease;
        }
        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline; /* Underline on hover for clarity */
        }
        a:visited {
            color: var(--link-color); /* Ensure visited links use theme color */
        }
        .container {
            background-color: var(--container-bg); /* USE VAR */
            padding: 25px; 
            border: 1px solid var(--border-color); /* USE VAR */
            max-width: 750px; 
            width: 100%;
            box-shadow: 0 1px 4px var(--box-shadow-color); /* USE VAR */
            transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
        }

        /* Profile Box Styling */
        .profile-box {
            border: 2px dashed var(--dashed-border-color); /* USE VAR */
            padding: 15px; 
            margin-bottom: 30px; 
            background-color: var(--box-bg); /* USE VAR */
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
        }
        .profile-content {
            display: flex;
            align-items: center;
            margin-bottom: 10px; 
            width: 100%;
        }
        .profile-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
            border: 1px solid var(--soft-border-color); /* USE VAR */
            flex-shrink: 0;
            cursor: pointer; /* Add cursor pointer for toggle */
            transition: border-color 0.3s ease; /* Smooth transition */
        }
        .profile-details {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        .profile-name {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 2px;
            color: var(--text-color); /* Ensure uses variable */
        }
        .profile-title {
            color: var(--secondary-text-color); /* USE VAR */
            font-size: 0.95em;
        }
        .profile-links {
            font-size: 0.9em;
            color: var(--secondary-text-color); /* USE VAR */
            display: flex;
            flex-wrap: wrap;
            justify-content: center; 
            gap: 5px 15px; 
            padding-left: 0; 
            margin-top: 5px; 
        }
        .profile-links a {
            text-decoration: none;
            color: var(--link-color); /* USE VAR */
            transition: color 0.2s ease;
            white-space: nowrap;
        }
        .profile-links a:hover {
            color: var(--link-hover-color); /* USE VAR */
        }


        /* Thoughts Header - Section Title Style */
        .thoughts-header {
            border: none;
            background-color: transparent;
            padding: 0; 
            display: block; 
            font-size: 1.4em; 
            font-weight: bold;
            color: var(--text-color); /* USE VAR */
            margin-top: 0; 
            margin-bottom: 25px; 
            padding-bottom: 8px; 
            border-bottom: 2px solid var(--soft-border-color); /* USE VAR */
            text-align: center; 
            transition: color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
        }

        /* Thought Box Styling */
        .thought-box {
            border: 2px dashed var(--dashed-border-color); /* USE VAR */
            padding: 15px;
            margin-bottom: 25px; 
            background-color: var(--box-bg); /* USE VAR */
            transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
        }

        /* Hover effect for clickable thought boxes (applied via JavaScript based on page type) */
        .thought-box.clickable:hover {
            background-color: var(--hover-bg-color);
            border-color: var(--text-color);
        }
        .thought-header {
            display: flex; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 0.5em;
            padding-bottom: 10px;
            font-size: 0.95em;
            color: var(--secondary-text-color); /* USE VAR */
        }
        .thought-user-img { 
             width: 25px;
             height: 25px;
             border-radius: 50%;
             object-fit: cover;
             border: 1px solid var(--soft-border-color); /* USE VAR */
             vertical-align: middle; 
             transition: border-color 0.3s ease; /* Smooth transition */
        }
        .thought-header .user-name {
            font-weight: bold;
            color: var(--text-color); /* USE VAR */
            margin: 0; 
        }
         .thought-header .separator {
             margin: 0 0.2em; 
             color: var(--light-text-color); /* Separator should probably use this */
         }
         .thought-header .date-time {
             color: var(--light-text-color); /* USE VAR */
             flex-shrink: 0; 
         }

        .thought-content p {
            margin-top: 0;
            margin-bottom: 15px;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-color); /* Ensure paragraph text uses variable */
        }
        .thought-image {
            margin-top: 15px; 
        }
        .thought-image .lightbox-trigger {
            display: block;
            max-width: 550px;  
            width: 100%; 
            margin-left: auto;
            margin-right: auto;
            cursor: pointer;
            overflow: hidden;
            border-radius: 8px;
            border: 1px solid var(--border-color); /* USE VAR */
            position: relative;
            transition: border-color 0.3s ease; /* Smooth transition */
        }
        .thought-image img.thought-img {
            display: block; 
            width: 100%; 
            height: auto; 
            transition: opacity 0.2s ease-in-out; 
        }
         .thought-image .lightbox-trigger:hover img.thought-img {
              opacity: 0.9; 
         }

        /* Lightbox Overlay */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--lightbox-bg); /* USE VAR */
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 40px;
            box-sizing: border-box;
            transition: background-color 0.3s ease; /* Smooth transition */
        }
        .lightbox-overlay.visible {
            display: flex; 
        }
        .lightbox-content {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 100%; 
            max-height: 100%;
        }
        .lightbox-content img {
            display: block;
            max-width: 100%; 
            max-height: 100%; 
            width: auto;
            height: auto;
            object-fit: contain;
            border: none;
            box-shadow: 0 5px 30px rgba(0,0,0,0.5); /* Keep shadow potentially dark */
        }
        .lightbox-close {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--lightbox-close-bg); /* USE VAR */
            color: var(--lightbox-close-color); /* USE VAR */
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 24px;
            font-weight: normal;
            line-height: 28px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.2s ease, color 0.2s ease; /* Smooth transition */
        }
        .lightbox-close:hover {
            background-color: var(--lightbox-close-hover-bg); /* USE VAR */
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
                max-width: 100%;
            }
             /* Adjusted Profile Box for Mobile */
             .profile-box {
                 padding: 12px; /* Further reduced padding */
                 margin-bottom: 25px; /* Further reduced margin */
             }
            /* Adjusted Profile Content for Mobile */
            .profile-content {
                 align-items: center;
                 margin-bottom: 8px; /* Further reduced bottom margin */
            }
            .profile-img {
                width: 50px;
                height: 50px;
                margin-right: 12px;
            }
             .profile-name {
                 font-size: 1.1em;
             }
             .profile-title {
                 font-size: 0.9em;
             }
             /* Adjusted Profile Links for Mobile */
            .profile-links {
                font-size: 0.85em;
                margin-top: 5px;
                gap: 4px 10px; /* Slightly tighter gap */
                justify-content: center; /* Ensure centering on mobile too */
            }
            .profile-links a {
                /* No mobile-specific 'a' tag changes needed currently */
            }

            .thoughts-header {
                font-size: 1.2em;
                margin-bottom: 20px;
            }
            .thought-box {
                padding: 12px;
                margin-bottom: 20px;
            }
             .thought-header {
                font-size: 0.9em; /* Slightly smaller font for header */
                gap: 0.4em; /* Reduce gap */
                padding-bottom: 8px; /* Reduce padding */
             }
             .thought-user-img {
                 width: 20px; /* Even smaller image on mobile */
                 height: 20px;
             }
             /* Optionally hide separator on very small screens if needed */
             /* .thought-header .separator { display: none; } */

             .thought-image .lightbox-trigger {
                  /* Remove max-width on mobile to allow full width */
                  max-width: 100%; 
                  border-radius: 6px; 
             }

             .lightbox-overlay { padding: 10px; }
             .lightbox-content {
                  /* Adjust max size slightly for smaller padding */
                  /* REMOVE THESE - they were overriding the general rules */
                  /* max-width: calc(100vw - 20px); */
                  /* max-height: calc(100vh - 20px); */
              }
             .lightbox-close {
                 top: 5px; right: 5px; width: 28px; height: 28px;
                 font-size: 20px; line-height: 26px;
             }

            .pagination {
                margin-top: 20px;
                padding-top: 15px;
                font-size: 0.85em; /* Smaller text on mobile */
            }
             .pagination a, .pagination span {
                 padding: 6px 10px; /* Smaller padding */
                 margin: 0 2px; /* Less margin */
             }
             .pagination span.page-info {
                 display: none; /* Optionally hide page number on very small screens */
             }

            /* Individual thought navigation responsive */
            .individual-thought-navigation {
                display: flex !important;
                flex-direction: column !important;
                gap: 10px !important;
                margin-top: 20px !important;
            }
            .individual-thought-navigation .nav-button {
                width: 100% !important;
                margin-right: 0 !important;
                margin-left: 0 !important;
                text-align: center !important;
                box-sizing: border-box !important;
            }

            /* Quoted thought images on mobile */
            .quoted-thought-image img {
                max-width: 70%; /* Even smaller on mobile for better proportion */
                max-height: 200px; /* Smaller height limit on mobile */
            }
        }

        /* Pagination Styling */
        .pagination {
            margin-top: 30px; /* Space above pagination */
            padding-top: 20px; /* Space below last thought */
            border-top: 1px solid var(--soft-border-color); /* USE VAR */
            text-align: center;
            display: flex; /* Use flexbox for alignment */
            justify-content: space-between; /* Space out Prev, Info, Next */
            align-items: center;
            transition: border-color 0.3s ease; /* Smooth transition */
        }
        .pagination a, .pagination span {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 4px;
            border: 1px solid var(--border-color); /* USE VAR */
            border-radius: 4px;
            color: var(--link-color); /* USE VAR */
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
            font-size: 0.9em;
        }
        .pagination a:hover {
            background-color: var(--hover-bg-color); /* USE VAR */
            color: var(--link-hover-color); /* USE VAR */
        }
        .pagination span.disabled {
            color: var(--disabled-text-color); /* USE VAR */
            background-color: var(--disabled-bg-color); /* USE VAR */
            cursor: default;
            border-color: var(--border-color); /* USE VAR - Use regular border color for consistency */
        }
        .pagination span.page-info {
             border: none; 
             color: var(--secondary-text-color); /* USE VAR */
             background-color: transparent;
        }

        /* Quoted Thought Styling */
        .quoted-thought-container {
            margin-top: 15px;
            border-left: 3px solid var(--border-color);
            padding-left: 15px;
            transition: border-color 0.3s ease;
        }

        .quoted-thought-box {
            border: 1px solid var(--soft-border-color);
            border-radius: 8px;
            padding: 12px;
            background-color: var(--box-bg);
            font-size: 0.9em; /* Slightly smaller text */
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .quoted-thought-box:hover {
            background-color: var(--hover-bg-color);
            cursor: pointer;
        }

        .quoted-thought-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        .quoted-thought-user-img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 8px;
            border: 1px solid var(--soft-border-color);
            transition: border-color 0.3s ease;
        }

        .quoted-user-name {
            font-weight: bold;
            color: var(--text-color);
            margin-right: 5px;
        }

        .quoted-thought-date-time {
            color: var(--light-text-color);
            margin: 0;
            font-size: 0.9em;
        }

        .quoted-thought-permalink {
            color: var(--light-text-color);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .quoted-thought-permalink:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        .quoted-thought-content p {
            margin: 0 0 8px 0;
            color: var(--text-color);
            line-height: 1.4;
        }

        .quoted-thought-image {
            margin-top: 8px;
        }

        .quoted-thought-image img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        .quoted-thought-image img:hover {
            opacity: 0.9;
        }

        /* Mobile responsive adjustments for quoted thoughts */
        @media (max-width: 600px) {
            .quoted-thought-container {
                padding-left: 10px;
                margin-top: 12px;
            }
            
            .quoted-thought-box {
                padding: 10px;
                font-size: 0.85em;
            }
            
            .quoted-thought-user-img {
                width: 20px;
                height: 20px;
                margin-right: 6px;
            }
            
            .quoted-thought-header {
                font-size: 0.8em;
            }
        }

        /* Theme Feedback Styling */
        .theme-feedback {
            position: fixed;
            top: 20px; /* Position from the top */
            left: 50%;
            transform: translateX(-50%); /* Center horizontally */
            background-color: var(--container-bg); /* Use theme background */
            color: var(--text-color); /* Use theme text color */
            padding: 10px 20px;
            border-radius: 20px; /* Rounded corners */
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            font-size: 0.9em;
            z-index: 1001; /* Above lightbox overlay */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease, top 0.4s ease;
            white-space: nowrap;
        }
        .theme-feedback.visible {
            opacity: 1;
            visibility: visible;
            top: 30px; /* Slightly move down when visible */
        }

        /* Quoted thought styles */
        .quoted-thought-container {
            margin-top: 16px;
            position: relative;
            padding: 0;
        }
        
        .quoted-thought-box {
            border-left: 3px solid var(--secondary-text-color);
            background: linear-gradient(135deg, 
                rgba(128, 128, 128, 0.03) 0%, 
                rgba(128, 128, 128, 0.01) 100%);
            border-radius: 0 12px 12px 0;
            padding: 14px 16px;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .quoted-thought-box:hover {
            background: linear-gradient(135deg, 
                rgba(128, 128, 128, 0.08) 0%, 
                rgba(128, 128, 128, 0.03) 100%);
            border-left-color: var(--text-color);
        }
        
        .quoted-thought-box::before {
            content: "";
            position: absolute;
            left: -3px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, 
                var(--secondary-text-color) 0%, 
                transparent 100%);
            border-radius: 3px 0 0 3px;
        }
        
        .quoted-thought-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            gap: 8px;
        }
        
        .quoted-thought-user-img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            flex-shrink: 0;
            opacity: 0.9;
        }
        
        .quoted-thought-user-info {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 0;
        }
        
        .quoted-user-name {
            font-weight: 500;
            font-size: 0.8em;
            color: var(--text-color);
            line-height: 1.2;
            opacity: 0.85;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .quoted-thought-date-time {
            font-size: 0.72em;
            color: var(--secondary-text-color);
            line-height: 1.2;
            opacity: 0.8;
            white-space: nowrap;
        }
        
        .quoted-thought-permalink {
            color: inherit;
            text-decoration: none;
            transition: all 0.2s ease;
            border-radius: 3px;
            padding: 1px 3px;
            margin: -1px -3px;
        }
        
        .quoted-thought-permalink:hover {
            color: var(--text-color);
            background-color: rgba(128, 128, 128, 0.1);
            text-decoration: none;
        }
        
        .quoted-thought-content p {
            font-size: 0.82em;
            margin: 0;
            line-height: 1.5;
            color: var(--text-color);
            opacity: 0.9;
        }
        
        .quoted-thought-image {
            margin-top: 10px;
        }
        
        .quoted-thought-image img {
            max-width: 80%; /* Smaller than main thought images */
            max-height: 300px; /* Limit height to maintain proportions */
            width: auto;
            height: auto;
            border-radius: 8px;
            border: 1px solid rgba(128, 128, 128, 0.15);
            transition: border-color 0.2s ease;
            object-fit: cover;
        }
        
        .quoted-thought-image img:hover {
            border-color: var(--border-color);
        }

    </style>

    <!-- Theme Feedback Element -->
    <div id="theme-feedback" class="theme-feedback" aria-live="polite"></div>

</head>
<body>
    <div class="container">
        <div class="profile-box">
    <div class="profile-content">
        <img src="data/profile.png" alt="Profile Picture" class="profile-img">
        <div class="profile-details">
            <div class="profile-name">Illya Gerasymchuk</div>
            <div class="profile-title">Entrepreneur / Engineer</div>
        </div>
    </div>
    <div class="profile-links">
        <a href="https://illya.sh" target="_blank">🏠 Homepage</a> &nbsp;&nbsp; <a href="mailto:illya_gerasymchuk@gmail.com" target="_blank">✉️ Email</a> &nbsp;&nbsp; <a href="https://t.me/illya_gerasymchuk" target="_blank">💬 Telegram</a> &nbsp;&nbsp; <a href="https://twitter.com/illyaGera" target="_blank">🐦 Twitter/X</a> &nbsp;&nbsp; <a href="https://github.com/iluxonchik" target="_blank">💻 GitHub</a> &nbsp;&nbsp; 
    </div>
</div>

        <h2 class="thoughts-header">⬇️ My Thoughts ⬇️</h2>

<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745675321.html" class="thought-permalink">2025-04-26 14:48</a></p>
    </div>
    <div class="thought-content">
        <p>🚨GDP is a useless metric…

…unless you combine it with additional context

If $1 billion is credited into an economy, a significant portion of that will make it into GDP, thus increasing it. That debt may be low quality/default

You need Debt to GDP, exports to GDP, etc</p>
        <div class="thought-image">
            
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745659780.html" class="thought-permalink">2025-04-26 10:29</a></p>
    </div>
    <div class="thought-content">
        <p>Rest of April was relatively uneventful 😴

≈50% of all gold physical delivery notices were filed on March 28th

I’ve learned that these are typical proportions for 1st notice day

Last intent/notice day is on April 29th

📆 YTD April is the 2nd largest month in terms of volume</p>
        <div class="thought-image">
            <a href="data/images/40bbb5f4-d475-5091-9988-3fe16e46e260.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/40bbb5f4-d475-5091-9988-3fe16e46e260.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745658938.html" class="thought-permalink">2025-04-26 10:15</a></p>
    </div>
    <div class="thought-content">
        <p>⚠️ Regarding CME COMEX 100 Gold Futures:

👉 Notice period begins 2 business days before the first day of the contract month

📅 So these are YTD values are starting from March 28th, not April 1st (DLV665-T)

The core idea remains the same - this is just a technicality of TradFi</p>
        <div class="thought-image">
            <a href="data/images/9fc89022-b964-571b-bbc2-4b6ac07f6414.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/9fc89022-b964-571b-bbc2-4b6ac07f6414.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745588344.html" class="thought-permalink">2025-04-25 14:39</a></p>
    </div>
    <div class="thought-content">
        <p>Let’s see how China's US bond holdings evolve from hereon 🇨🇳🇺🇸</p>
        <div class="thought-image">
            <a href="data/images/0e003ee6-af84-5eec-8f86-6b376f6e0d98.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/0e003ee6-af84-5eec-8f86-6b376f6e0d98.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745577053.html" class="thought-permalink">2025-04-25 11:30</a></p>
    </div>
    <div class="thought-content">
        <p>Regarding the 1492 “gold top” & 533 years breakeven - the information is misleading

These price extrapolations made a lot of assumptions & simplifications

Perhaps most importantly, pre-1700’s gold prices were fixed by the government - not a trade/free market derived price</p>
        <div class="thought-image">
            <a href="data/images/3b744c08-3789-565d-acc5-11819c4f1901.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/3b744c08-3789-565d-acc5-11819c4f1901.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745575233.html" class="thought-permalink">2025-04-25 11:00</a></p>
    </div>
    <div class="thought-content">
        <p>Now that gold is down & below $3.3K, it’s a good time to say this:

🎉  New ATH coming very soon 🎉

In the time of political, civil & economic ambiguity - there is only one recourse - Au

Lower interest rates & QE are coming soon - FIAT down, gold up

💾 Save this & check back</p>
        <div class="thought-image">
            <a href="data/images/3e8003ba-467e-50e6-9ecb-a811ef423458.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/3e8003ba-467e-50e6-9ecb-a811ef423458.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745492937.html" class="thought-permalink">2025-04-24 12:08</a></p>
    </div>
    <div class="thought-content">
        <p>Correlation between Ruble & Gold 🇷🇺🥇:

Gold up ➡️ Ruble up
Gold down ➡️ Ruble down
Gold sideways ➡️ Ruble sideways

Russia could make RUB gold-backed, make RUB convertible to gold on demand & position RUB as a “trustless”/money-backed currency

Already halfway through there</p>
        <div class="thought-image">
            <a href="data/images/781dd393-5a88-55b2-8324-188c61826eae.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/781dd393-5a88-55b2-8324-188c61826eae.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745444706.html" class="thought-permalink">2025-04-23 22:45</a></p>
    </div>
    <div class="thought-content">
        <p>🇷🇺 Ruble is correlating with gold

This also explains the recent fall in price. Gold went down against USD & so did RUB

Such a retracement after multiple consecutive ATHs is expected

Fundamentals are still on the side of gold

🧠 Remember: gold is 35% of Russia's int'l reserves</p>
        <div class="thought-image">
            <a href="data/images/ffa7d20c-3ae6-5072-9a93-24068b54cc63.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/ffa7d20c-3ae6-5072-9a93-24068b54cc63.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745435298.html" class="thought-permalink">2025-04-23 20:08</a></p>
    </div>
    <div class="thought-content">
        <p>🇷🇺 Ruble outflows into USD 🇺🇸

A lot of liquidity moved from RUB back into USD. This is also telling by the rebounded USD index

But gold will appreciate further. Russian Central Bank’s massive gold reserves will pay off</p>
        <div class="thought-image">
            <a href="data/images/8744029b-94d6-50e1-99d1-4f0edc2dfd6b.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/8744029b-94d6-50e1-99d1-4f0edc2dfd6b.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745409915.html" class="thought-permalink">2025-04-23 13:05</a></p>
    </div>
    <div class="thought-content">
        <p>Upwards retracements for US Dollar Index are normal

$DXY fell to ≈98.3 as I previously predicted

That whole area is a monthly support level, thus a source & trigger for massive amounts of liquidity

It’s not only FOREX, but also the world reserve currency</p>
        <div class="thought-image">
            <a href="data/images/8cf60422-2be4-5cc6-84cb-f595ecf228da.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/8cf60422-2be4-5cc6-84cb-f595ecf228da.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745407193.html" class="thought-permalink">2025-04-23 12:19</a></p>
    </div>
    <div class="thought-content">
        <p>🇺🇸🇨🇳Here's why trade war with China will hurt the US

The economic relationship between US & China is:
1️⃣US pays USD for Chinese goods
2️⃣China re-invests USD back into US bonds

Thus, the same USD comes back to US!

Tariffs = less imports = less US bond investment = higher yield</p>
        <div class="thought-image">
            <a href="data/images/9e3dd8d7-3fcd-5cba-9b95-abd37c1692ed.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/9e3dd8d7-3fcd-5cba-9b95-abd37c1692ed.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745406138.html" class="thought-permalink">2025-04-23 12:02</a></p>
    </div>
    <div class="thought-content">
        <p>🇨🇳China has been increasing their gold reserves YTD

Gold price keeps going up - major central banks continue to load up

Gold is a hedge against USD. Tariffs are a medium of USD weaponization

👉 Expect US securities sell-off for gold by People's Bank of China</p>
        <div class="thought-image">
            <a href="data/images/a8fb9f23-2e7e-557b-8b53-0fd6f1903cdf.png" class="lightbox-trigger"><img loading="lazy" src="data/images/a8fb9f23-2e7e-557b-8b53-0fd6f1903cdf.png" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745405239.html" class="thought-permalink">2025-04-23 11:47</a></p>
    </div>
    <div class="thought-content">
        <p>🇯🇵Article 13 of Accounting Rules of the BOJ defines special valuation rules for securities:

1️⃣ Yen bonds at amortized cost
2️⃣ Foreign currency bonds at market value
3️⃣ Stocks, ETFs, J-REITs at MA cost

Since gold is not a security, it falls under Article 3 - book value</p>
        <div class="thought-image">
            <a href="data/images/2129bae8-6281-5d21-8c9d-a319b7ae3b01.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/2129bae8-6281-5d21-8c9d-a319b7ae3b01.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745404819.html" class="thought-permalink">2025-04-23 11:40</a></p>
    </div>
    <div class="thought-content">
        <p>Generally accepted principles of corporate accounting are:

- Historical cost - asset value is recorded at book/acquisition value
- Prudence/Conservatism - decrease the asset value in the balance sheet if it has fallen in value. Unrealized gains are ignored

🇯🇵BOJ abides by them</p>
        <div class="thought-image">
            <a href="data/images/31d9fb0e-ce49-5835-bf93-c0e5c476f71d.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/31d9fb0e-ce49-5835-bf93-c0e5c476f71d.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745404473.html" class="thought-permalink">2025-04-23 11:34</a></p>
    </div>
    <div class="thought-content">
        <p>🇯🇵Article 3 of Accounting Rules of the Bank of Japan states that "generally accepted principles of corporate accounting" shall be used for BOJ's accounting

This defines the framework of how assets and liabilities are values in the central bank's balance sheet</p>
        <div class="thought-image">
            <a href="data/images/0ccb5d30-ca47-5bec-bafd-eaef0ec828bb.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/0ccb5d30-ca47-5bec-bafd-eaef0ec828bb.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745404200.html" class="thought-permalink">2025-04-23 11:30</a></p>
    </div>
    <div class="thought-content">
        <p>🇯🇵 BOJ's gold holdings have been constant for 10 years

But gold value has skyrocketed - does that mean Japan has been selling gold?

No. Articles 3 & 13 of Accounting Rules of BOJ imply that gold holdings are recorded at book value/purchase value, rather than market/spot price</p>
        <div class="thought-image">
            <a href="data/images/72ee30b8-2db6-5210-94e4-826a492321a9.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/72ee30b8-2db6-5210-94e4-826a492321a9.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745403205.html" class="thought-permalink">2025-04-23 11:13</a></p>
    </div>
    <div class="thought-content">
        <p>🇯🇵 Gemini 2.5 Pro Deep Research says Bank of Japan will continue with QT

I say they will switch (back) to QE soon

By QE I mean expansion of balance sheet, combined with low/negative key interest rates

Let's see who's right</p>
        <div class="thought-image">
            <a href="data/images/1a07411b-238f-59fe-ad79-7e5289c77920.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/1a07411b-238f-59fe-ad79-7e5289c77920.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745402695.html" class="thought-permalink">2025-04-23 11:04</a></p>
    </div>
    <div class="thought-content">
        <p>🇯🇵Bank of Japan just released their 10 day account/balance sheet statements

💰2025 YTD:

- Gold holdings stable
- Foreign currencies down
- Cash up
- JGB down
- Total assets down

Signs of QT, but it won't last. Soon, the balance sheet will expand again. High exposure to USD.</p>
        <div class="thought-image">
            <a href="data/images/5988f91d-756c-57a3-9f35-22a5bcf466cd.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/5988f91d-756c-57a3-9f35-22a5bcf466cd.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745400547.html" class="thought-permalink">2025-04-23 10:29</a></p>
    </div>
    <div class="thought-content">
        <p>A moment of appreciation for how the US Treasury reports the major sovereign holders of securities in this plain HTML table

Clear, lightweight and works on every device

There's also a plain text version, but it's not as neatly formatted</p>
        <div class="thought-image">
            <a href="data/images/75918796-ef24-5789-b757-2ae7378afc1e.png" class="lightbox-trigger"><img loading="lazy" src="data/images/75918796-ef24-5789-b757-2ae7378afc1e.png" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745360467.html" class="thought-permalink">2025-04-22 23:21</a></p>
    </div>
    <div class="thought-content">
        <p>🚨 Short-term USD risk is up

Premium/yield is a measure a risk

Imagine you’re purchasing a stock of a company. The CEO of that company makes hostile comments towards its financial division

Does the required return to cover the risk of that company increase or decrease?</p>
        <div class="thought-image">
            <a href="data/images/b9a3ac13-f81a-51ff-8980-badae45e4171.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/b9a3ac13-f81a-51ff-8980-badae45e4171.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745350159.html" class="thought-permalink">2025-04-22 20:29</a></p>
    </div>
    <div class="thought-content">
        <p>🚀 Updated <a href="https://illya.sh/thoughts/" target="_blank">https://illya.sh/thoughts/</a>

- Dark/Light mode automatic + toggleable (click on profile image)
- More compact design
- Large image preview (on click) fixed on mobile

My latest X posts are now also live</p>
        <div class="thought-image">
            <a href="data/images/f3897659-0685-500e-a7c0-055ff205977f.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/f3897659-0685-500e-a7c0-055ff205977f.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745340170.html" class="thought-permalink">2025-04-22 17:42</a></p>
    </div>
    <div class="thought-content">
        <p>🚀 Pushed an update to my homepage at <a href="https://illya.sh/" target="_blank">https://illya.sh/</a>

Added a link to <a href="https://illya.sh/thoughts/" target="_blank">https://illya.sh/thoughts/</a> to which I have been exporting a lot of my tweets

Making “My Thoughts” button exactly like I wanted took a few iterations and custom contexting with Gemini 2.5 Pro</p>
        <div class="thought-image">
            <a href="data/images/426e2f68-f2d2-5e87-93bc-53b37a4078f6.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/426e2f68-f2d2-5e87-93bc-53b37a4078f6.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745244922.html" class="thought-permalink">2025-04-21 15:15</a></p>
    </div>
    <div class="thought-content">
        <p>🇷🇺 Russian Central Bank key interest rate is at 21%

3Y Russian Federation bonds are at ≈16.5% yield

The market is pricing in upcoming rate cuts

@AskPerplexity and @grok will tell you that Ruble & Russian economy are in a bad state. The reality is different</p>
        <div class="thought-image">
            <a href="data/images/e29907be-37d6-5d0d-ae19-34e9adc760c7.jpg" class="lightbox-trigger"><img loading="lazy" src="data/images/e29907be-37d6-5d0d-ae19-34e9adc760c7.jpg" alt="Thought Image" class="thought-img"></a>
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745219208.html" class="thought-permalink">2025-04-21 08:06</a></p>
    </div>
    <div class="thought-content">
        <p>🚨UPDATE: Gold has now reached $3400

All time highs, followed by more all time highs

Remember: gold is not increasing in value, but rather the underlying currencies are falling in value

Expect this trend to continue</p>
        <div class="thought-image">
            
        </div>
        
    </div>
</div>


<div class="thought-box">
    <div class="thought-header">
        <img src="data/profile.png" alt="User" class="thought-user-img">
        <span class="user-name">Illya Gerasymchuk</span> -
        <p class="thought-date-time"><a href="@1745211155.html" class="thought-permalink">2025-04-21 05:52</a></p>
    </div>
    <div class="thought-content">
        <p>🇺🇸UPDATE: USD Index in fact did NOT enjoy this

#DXY down over 1% today, currently at 98.3

It's almost like aggressively weaponizing the currency erodes the trust in it. Who knew!</p>
        <div class="thought-image">
            
        </div>
        
    </div>
</div>

        
        <nav class="pagination"><a href="10.html" class="newer">← Newer</a><span class="page-info">Page 5 of 13</span><a href="8.html" class="older">Older →</a></nav>
    </div>

    <!-- Lightbox Structure (Initially Hidden) -->
    <div id="lightbox" class="lightbox-overlay">
        <div class="lightbox-content">
            <button class="lightbox-close" aria-label="Close">&times;</button>
            <img src="" alt="Lightbox image">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = lightbox.querySelector('img');
            const lightboxClose = lightbox.querySelector('.lightbox-close');
            const triggers = document.querySelectorAll('.lightbox-trigger');

            triggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default link behavior
                    const imgSrc = trigger.getAttribute('href');
                    lightboxImg.setAttribute('src', imgSrc);
                    lightbox.classList.add('visible');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling background
                });
            });

            // Check if we're on an individual thought page
            const isIndividualThoughtPage = window.location.pathname.includes('@');
            
            // Handle quoted thought box clicks for navigation (always clickable)
            const quotedThoughts = document.querySelectorAll('.quoted-thought-box');
            quotedThoughts.forEach(quotedBox => {
                quotedBox.addEventListener('click', (e) => {
                    // Don't navigate if clicking on an image or link within the quoted thought
                    if (e.target.tagName === 'IMG' || e.target.tagName === 'A') {
                        return;
                    }
                    e.preventDefault();
                    // Find the permalink within this quoted thought
                    const permalink = quotedBox.querySelector('.quoted-thought-permalink');
                    if (permalink) {
                        window.location.href = permalink.getAttribute('href');
                    }
                });
                
                // Add cursor pointer to indicate clickability
                quotedBox.style.cursor = 'pointer';
            });

            // Handle main thought box clicks (only in timeline/list views, not on individual pages)
            if (!isIndividualThoughtPage) {
                const mainThoughts = document.querySelectorAll('.thought-box');
                mainThoughts.forEach(thoughtBox => {
                    // Skip if this is a quoted thought box (already handled above)
                    if (thoughtBox.closest('.quoted-thought-container')) {
                        return;
                    }
                    
                    thoughtBox.addEventListener('click', (e) => {
                        // Don't navigate if clicking on an image, link, or quoted thought within the main thought
                        if (e.target.tagName === 'IMG' || 
                            e.target.tagName === 'A' || 
                            e.target.closest('.quoted-thought-container')) {
                            return;
                        }
                        e.preventDefault();
                        // Find the permalink within this main thought
                        const permalink = thoughtBox.querySelector('.thought-permalink');
                        if (permalink) {
                            window.location.href = permalink.getAttribute('href');
                        }
                    });
                    
                    // Add cursor pointer and clickable class to indicate clickability
                    thoughtBox.style.cursor = 'pointer';
                    thoughtBox.classList.add('clickable');
                });
            }

            function closeLightbox() {
                lightbox.classList.remove('visible');
                lightboxImg.setAttribute('src', ''); // Clear image src
                document.body.style.overflow = ''; // Restore scrolling
            }

            // Close on button click
            lightboxClose.addEventListener('click', closeLightbox);

            // Close on clicking overlay background
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) { // Only close if overlay itself is clicked
                    closeLightbox();
                }
            });

            // Close on Escape key press
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && lightbox.classList.contains('visible')) {
                    closeLightbox();
                }
            });
        });
    </script>

    <script>
        // Dark Mode Toggle Logic
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const profileImg = document.querySelector('.profile-img');
            const feedbackElement = document.getElementById('theme-feedback');
            const themeLocalStorageKey = 'themePreference'; // Stores 'auto', 'light', or 'dark'
            let feedbackTimeout;

            function applyTheme(theme) {
                // Remove specific mode classes first
                body.classList.remove('light-mode', 'dark-mode');
                let actualTheme = theme;

                if (theme === 'auto') {
                    // Check system preference if auto
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    actualTheme = prefersDark ? 'dark' : 'light';
                } 

                // Apply the determined theme class
                if (actualTheme === 'dark') {
                    body.classList.add('dark-mode');
                } else {
                    body.classList.add('light-mode'); 
                }
            }

            function showFeedback(message) {
                if (!feedbackElement) return;
                
                // Clear any existing timeout to prevent overlap
                if (feedbackTimeout) {
                    clearTimeout(feedbackTimeout);
                }

                feedbackElement.innerHTML = message;
                feedbackElement.classList.add('visible');

                // Hide feedback after a delay
                feedbackTimeout = setTimeout(() => {
                    feedbackElement.classList.remove('visible');
                }, 1700); // 1.7 seconds
            }

            function setThemePreference(theme) {
                localStorage.setItem(themeLocalStorageKey, theme);
                applyTheme(theme);
                // Show feedback based on the *newly set* preference
                let feedbackMessage = '';
                if (theme === 'light') {
                    feedbackMessage = '💡 Light Mode Activated';
                } else if (theme === 'dark') {
                    feedbackMessage = '🌙 Dark Mode Activated';
                } else {
                    feedbackMessage = '⚙️ Auto Mode Activated';
                }
                 showFeedback(feedbackMessage);
            }

            function cycleTheme() {
                const currentPreference = localStorage.getItem(themeLocalStorageKey) || 'auto'; // Default to auto
                let nextPreference;

                if (currentPreference === 'auto') {
                    nextPreference = 'light';
                } else if (currentPreference === 'light') {
                    nextPreference = 'dark';
                } else { // currentPreference === 'dark'
                    nextPreference = 'auto';
                }
                setThemePreference(nextPreference);
            }

            // Set initial theme
            const savedTheme = localStorage.getItem(themeLocalStorageKey) || 'auto'; // Default to auto
            applyTheme(savedTheme);

            // Add click listener to profile image
            if (profileImg) {
                profileImg.addEventListener('click', cycleTheme);
            }

             // Listen for system theme changes
             window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                 // Only apply change if the current preference is 'auto'
                 if (localStorage.getItem(themeLocalStorageKey) === 'auto' || !localStorage.getItem(themeLocalStorageKey)) {
                     applyTheme('auto'); // Re-apply auto theme to respect the change
                 }
             });
        });
    </script>

</body>
</html>
